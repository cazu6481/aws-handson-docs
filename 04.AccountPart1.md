**AWSアカウント・権限設計（基本方針）**

**アカウント構造の詳細設計**

**組織階層とアカウント分類：**

1.  **管理アカウント階層**

    - **組織マスターアカウント：** AWS Organizations のルートアカウント

      - **用途：** 請求統合、組織ポリシー管理、Control Tower管理

      - **アクセス制御：** 最小限の管理者（経営層2名、IT部長1名）のみ

      - **セキュリティ要件：** MFA必須、CloudTrail全有効、Config記録

    - **セキュリティアカウント：** セキュリティログ・監視の集中管理

      - **用途：** Security Hub、GuardDuty、Config、CloudTrail ログ集約

      - **アクセス制御：** セキュリティ管理者3名、読み取り専用監査者5名

      - **セキュリティ要件：** ログの暗号化、90日間の保持、改ざん防止

    - **共有サービスアカウント：** 共通インフラコンポーネント管理

      - **用途：** DNS（Route
        53）、証明書管理（ACM）、コンテナレジストリ（ECR）

      - **アクセス制御：** インフラ管理者5名、自動化サービス用ロール

      - **セキュリティ要件：** リソース共有ポリシー、アクセスログ監視

2.  **ネットワークアカウント：** ネットワークインフラ専用管理

    - **ネットワークハブアカウント**

      - **用途：** Transit Gateway、DirectConnect、Site-to-Site VPN管理

      - **アクセス制御：** ネットワーク管理者3名、緊急時対応者2名

      - **セキュリティ要件：** ネットワークフロー監視、VPC Flow Logs有効

## **事業部門別アカウント構成**

**アカウント命名規則：** {会社略称}-{事業部門}-{環境}-{サービス群}

**事業部門分類（5部門）：**

1.  **製造部門（mfg）：** 生産管理、品質管理システム

2.  **営業部門（sales）：** 販売管理、顧客管理システム

3.  **サービス部門（service）：** 保守サービス管理システム

4.  **IoT部門（iot）：** 機器IoTプラットフォーム

5.  **共通部門（common）：** 認証、通知、マスターデータ、レポーティング

**環境分類（4環境）：**

1.  **開発環境（dev）：** 開発・単体テスト用

2.  **テスト環境（test）：** 結合テスト・性能テスト用

3.  **ステージング環境（staging）：** 本番前検証用

4.  **本番環境（prod）：** 商用サービス稼働用

**サービス群分類（6群）：**

1.  **アプリケーション群（app）：** マイクロサービス本体

2.  **データベース群（db）：** Aurora、DynamoDB

3.  **API群（api）：** API Gateway、Cognito

4.  **バッチ群（batch）：** Step Functions、Lambda

5.  **監視群（monitor）：** CloudWatch、X-Ray

6.  **ネットワーク群（network）：VPC、ALB、NLB**

**具体的アカウント一覧（120アカウント）**

**製造部門アカウント（24アカウント）：**
```
technova-mfg-dev-app \# 製造アプリケーション開発環境

technova-mfg-dev-db \# 製造データベース開発環境

technova-mfg-dev-api \# 製造API開発環境

technova-mfg-dev-batch \# 製造バッチ開発環境

technova-mfg-dev-monitor \# 製造監視開発環境

technova-mfg-dev-network \# 製造ネットワーク開発環境

technova-mfg-test-app \# 製造アプリケーションテスト環境

technova-mfg-test-db \# 製造データベーステスト環境

technova-mfg-test-api \# 製造APIテスト環境

technova-mfg-test-batch \# 製造バッチテスト環境

technova-mfg-test-monitor \# 製造監視テスト環境

technova-mfg-test-network \# 製造ネットワークテスト環境

technova-mfg-staging-app \# 製造アプリケーションステージング環境

technova-mfg-staging-db \# 製造データベースステージング環境

technova-mfg-staging-api \# 製造APIステージング環境

technova-mfg-staging-batch \# 製造バッチステージング環境

technova-mfg-staging-monitor \# 製造監視ステージング環境

technova-mfg-staging-network \# 製造ネットワークステージング環境

technova-mfg-prod-app \# 製造アプリケーション本番環境

technova-mfg-prod-db \# 製造データベース本番環境

technova-mfg-prod-api \# 製造API本番環境

technova-mfg-prod-batch \# 製造バッチ本番環境

technova-mfg-prod-monitor \# 製造監視本番環境

technova-mfg-prod-network \# 製造ネットワーク本番環境
```
**営業部門アカウント（24アカウント）：**
```
technova-sales-{env}-{service} \# 営業部門の全環境・サービス群
```
**サービス部門アカウント（24アカウント）：**
```
technova-service-{env}-{service} \# サービス部門の全環境・サービス群
```
**IoT部門アカウント（24アカウント）：**
```
technova-iot-{env}-{service} \# IoT部門の全環境・サービス群
```
**共通部門アカウント（24アカウント）：**
```
technova-common-{env}-{service} \# 共通部門の全環境・サービス群
```
**アカウント管理要件**

**アカウント作成・管理自動化要件：**

- **作成時間短縮：**手動2週間→AFT自動化2時間以内

- **設定一貫性：**100%の設定標準化、人的ミス0件

- **セキュリティベースライン：**全アカウントに統一セキュリティ設定自動適用

- **タグ管理：**コスト配分用タグの自動付与（部門、環境、プロジェクト、担当者）

**運用管理要件：**

- **アカウント棚卸し：**月次でのアカウント利用状況レビュー

- **コスト監視：**アカウント別予算設定とアラート通知

- **使用量監視：**未使用リソースの自動検出と通知

- **セキュリティ監査：**アカウント設定の定期的な監査とレポート

**災害対策要件：**

- **マルチリージョン：**本番環境は東京（ap-northeast-1）・大阪（ap-northeast-3）の両リージョン

- **データレプリケーション：**本番データベースの自動レプリケーション

- **フェイルオーバー：**RTOの4時間、RPO1時間の要件達成

**認証・認可設計**

**AWS IAM Identity Center（旧SSO）をID連携の中核に：**

- **社内Active
  Directoryとの連携：**既存のユーザー・グループ情報を自動同期

- **多要素認証（MFA）：**全ユーザーでMFA必須、緊急時のバックアップ認証方式

- **セッション管理：**業務時間帯は8時間、非業務時間帯は1時間のセッション有効期限

**Permission Set設計：**

1.  **管理者権限セット：**

    - **OrganizationAdmin：**組織全体の管理（経営層・IT管理責任者）

    - **SecurityAdmin：**セキュリティ管理（セキュリティ管理者）

    - **NetworkAdmin：**ネットワーク管理（ネットワーク管理者）

2.  **開発者権限セット：**

    - **DeveloperFull：**開発環境のフルアクセス（開発者）

    - **DeveloperRead：**開発環境の読み取りのみ（新人・インターン）

    - **QAEngineer：**テスト環境の必要最小限権限（QAエンジニア）

3.  **運用者権限セット：**

    - **OperationAdmin：**本番環境の運用権限（運用管理者）

    - **OperationReadOnly：**本番環境の監視専用権限（監視オペレーター）

    - **EmergencyAccess：**緊急時対応の特別権限（緊急時対応者）

4.  **監査者権限セット：**

    - **AuditorReadOnly：**全環境の読み取り専用権限（内部監査）

    - **ComplianceRead：**コンプライアンス監査用権限（外部監査）

**サービスロール設計：**

- **ECS Taskロール：**マイクロサービス実行時の最小権限

- **Aurora接続ロール：**IAMデータベース認証による接続

- **Lambda実行ロール：**バッチ処理用の必要最小限権限

- **CI/CDサービスロール：**デプロイパイプライン専用権限

**セキュリティ・コンプライアンス要件**

**最小権限の原則：**

- **時間制限アクセス：**特権アクセスは業務時間内のみ、緊急時は承認制

- **IP制限：**本社・各拠点のIPアドレスからのみアクセス許可

- **デバイス制限：**会社支給デバイスからのみアクセス許可

**監査・証跡要件：**

- **CloudTrail：**全アカウントで API 呼び出しを記録、3年間保持

- **Config：**リソース設定変更の記録、コンプライアンス違反の検出

- **Access Analyzer：**意図しないリソース共有の定期的な監査

**緊急時アクセス手順：**

- **ブレークグラス手順：**緊急時の特権アクセス手順を文書化

- **承認フロー：**緊急時アクセスの事前承認とログ監視

- **事後レビュー：**緊急時アクセス後の必須レビューと報告

この包括的なアカウント要件により、TechNova社は120のAWSアカウントを安全かつ効率的に管理し、マイクロサービス化されたシステムの運用基盤を確立できます。
