## **AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»æ¨©é™è¨­è¨ˆï¼ˆåŸºæœ¬æ–¹é‡ï¼‰**

ç›®æ¬¡

[**æ¦‚è¦**](#%E6%A6%82%E8%A6%81)

[**æ¨©é™è¨­è¨ˆã®åŸºæœ¬åŸå‰‡**](#1-%E6%A8%A9%E9%99%90%E8%A8%AD%E8%A8%88%)

[**IAM Identity
Centerçµ±åˆæˆ¦ç•¥**](#2-iam-identity-center%E7%B5%B1%E5%90%88)

[**è·å‹™åˆ†é›¢ã¨æœ€å°æ¨©é™ã®å®Ÿè£…**](#3-%E8%81%B7%E5%8B%99%E5%88%86%E9%9B%A2%)

[**ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™ç®¡ç†**](#4-%E3%82%AF%E3%83%AD%E3%82%B9%E3%82%A2%)

[**ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ»ç›£æŸ»å¯¾å¿œ**](#5-%E3%82%B3%E3%83%B3%E3%83%97%E3%83%A9%)

[**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¢ƒç•Œè¨­è¨ˆ**](#6-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%)

[**ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†**](#7-%E7%B7%8A%E6%80%A5%E6%99%82%E3%82%A2%)

[**ç›£è¦–ãƒ»ãƒ­ã‚°æˆ¦ç•¥**](#8-%E7%9B%A3%E8%A6%96%E3%83%AD%E3%82%B0%)

[**å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**](#9-%E5%AE%9F%E8%A3%85%E3%82%AC%E3%82%A4%)

æ¦‚è¦

è¨­è¨ˆèƒŒæ™¯

TechNovaç¤¾ã®120ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã«ãŠã‘ã‚‹æ¨©é™ç®¡ç†ã¯ã€äº‹æ¥­éƒ¨é–€åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã¨å¯†æ¥ã«é€£æºã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚¬ãƒãƒŠãƒ³ã‚¹ã‚’ä¸¡ç«‹ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æœ¬æ–¹é‡æ›¸ã¯ã€ç‰©ç†çš„ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ†é›¢ã«å¯¾ã™ã‚‹è«–ç†çš„ãªæ¨©é™ç®¡ç†æˆ¦ç•¥ã‚’å®šç¾©ã—ã¾ã™ã€‚

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã¨ã®æ•´åˆæ€§

äº‹æ¥­éƒ¨é–€åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã§å®šç¾©ã•ã‚ŒãŸä»¥ä¸‹ã®æ§‹é€ ã«å¯¾å¿œï¼š

ç®¡ç†ç³»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ­ã‚°ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€è«‹æ±‚ç®¡ç†

äº‹æ¥­éƒ¨é–€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: è£½å“é–‹ç™ºã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ‡ãƒ¼ã‚¿åˆ†æã€HR

ç’°å¢ƒåˆ†é›¢: æœ¬ç•ª(prod)ã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°(staging)ã€é–‹ç™º(dev)

ç‰¹æ®Šç”¨é€”ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã€å…±æœ‰ã‚µãƒ¼ãƒ“ã‚¹

æ¨©é™è¨­è¨ˆã®ç›®æ¨™

Zero Trust ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å®Ÿç¾

æœ€å°æ¨©é™åŸå‰‡ã®å¾¹åº•

è·å‹™åˆ†é›¢ã«ã‚ˆã‚‹ä¸æ­£é˜²æ­¢

ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶ã¸ã®æº–æ‹ 

é‹ç”¨åŠ¹ç‡ã®å‘ä¸Š

1\. æ¨©é™è¨­è¨ˆã®åŸºæœ¬åŸå‰‡

1.1 ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«

yaml

*\# Zero Trust ã®å®Ÿè£…åŸå‰‡*

zero_trust_principles:

identity_verification:

\- "å…¨ã¦ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’èªè¨¼ãƒ»èªå¯"

\- "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¢ƒç•Œã§ã®æ¤œè¨¼å¼·åŒ–"

\- "ç¶™ç¶šçš„ãªä¿¡é ¼åº¦è©•ä¾¡"

least_privilege:

\- "æœ€å°é™ã®æ¨©é™ã®ã¿ä»˜ä¸"

\- "æ™‚é–“åˆ¶é™ä»˜ãã‚¢ã‚¯ã‚»ã‚¹"

\- "Just-In-Timeæ¨©é™æ˜‡æ ¼"

assume_breach:

\- "ä¾µå®³ã‚’å‰æã¨ã—ãŸè¨­è¨ˆ"

\- "æ¨ªå±•é–‹ã®é˜²æ­¢"

\- "ç•°å¸¸æ¤œçŸ¥ã¨è‡ªå‹•å¯¾å¿œ"

1.2 æ¨©é™ç®¡ç†éšå±¤

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚ Organization Level â”‚

â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚

â”‚ â”‚ Identity â”‚ â”‚ Compliance â”‚ â”‚ Audit â”‚ â”‚

â”‚ â”‚ Management â”‚ â”‚ Governance â”‚ â”‚ Logging â”‚ â”‚

â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚ Business Unit Level â”‚

â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚

â”‚ â”‚ Department â”‚ â”‚ Project â”‚ â”‚ Resource â”‚ â”‚

â”‚ â”‚ Admin â”‚ â”‚ Teams â”‚ â”‚ Access â”‚ â”‚

â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚ Application Level â”‚

â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚

â”‚ â”‚ Service â”‚ â”‚ Environment â”‚ â”‚ Resource â”‚ â”‚

â”‚ â”‚ Accounts â”‚ â”‚ Isolation â”‚ â”‚ Specific â”‚ â”‚

â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1.3 æ¨©é™ä»˜ä¸ã®åŸå‰‡

æœ€å°æ¨©é™åŸå‰‡ (Principle of Least Privilege)

json

{

"minimum_required_access": {

"default_policy": "DENY_ALL",

"explicit_grants": "SPECIFIC_RESOURCES_ONLY",

"time_bounds": "LIMITED_DURATION",

"scope_bounds": "NARROWEST_POSSIBLE"

},

"progressive_access": {

"initial_access": "READ_ONLY",

"proven_need": "ADDITIONAL_PERMISSIONS",

"regular_review": "ACCESS_CERTIFICATION"

}

}

è·å‹™åˆ†é›¢åŸå‰‡ (Separation of Duties)

yaml

separation_of_duties:

development_vs_production:

\- "é–‹ç™ºè€…ã¯æœ¬ç•ªç’°å¢ƒã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯"

\- "æœ¬ç•ªå¤‰æ›´ã¯æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹å¿…é ˆ"

\- "ç·Šæ€¥æ™‚ã®ã¿ä¾‹å¤–çš„ãªç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹"

security_vs_operations:

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã¯å°‚é–€ãƒãƒ¼ãƒ ã®ã¿"

\- "é‹ç”¨ãƒãƒ¼ãƒ ã¯æ—¥å¸¸ç®¡ç†ã®ã¿"

\- "ç›¸äº’ç›£è¦–ã«ã‚ˆã‚‹ä¸æ­£é˜²æ­¢"

audit_independence:

\- "ç›£æŸ»ãƒ­ã‚°ã¯ç‹¬ç«‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ç®¡ç†"

\- "ç›£æŸ»æ‹…å½“è€…ã¯è¢«ç›£æŸ»ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯"

\- "ãƒ­ã‚°ã®æ”¹ã–ã‚“é˜²æ­¢æ©Ÿèƒ½"

2\. IAM Identity Centerçµ±åˆæˆ¦ç•¥

2.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

hcl

*\# IAM Identity Center ã®çµ„ç¹”ãƒ¬ãƒ™ãƒ«è¨­å®š*

resource "aws_ssoadmin_instances" "main" {

*\# Organization ã®ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§è¨­å®š*

}

*\# å¤–éƒ¨IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ*

resource "aws_ssoadmin_instance_access_control_attributes" "main" {

instance_arn = aws_ssoadmin_instances.main.arn

attribute {

key = "Department"

value {

source = \["\${path:enterprise.department}"\]

}

}

attribute {

key = "CostCenter"

value {

source = \["\${path:enterprise.costCenter}"\]

}

}

attribute {

key = "JobTitle"

value {

source = \["\${path:enterprise.title}"\]

}

}

}

2.2 Permission Set è¨­è¨ˆæˆ¦ç•¥

åŸºæœ¬Permission Setéšå±¤

yaml

permission_sets:

*\# ç®¡ç†ç³»æ¨©é™*

administrative:

OrganizationAdministrator:

description: "çµ„ç¹”å…¨ä½“ã®ç®¡ç†æ¨©é™"

accounts: \["management-\*"\]

policies: \["AdministratorAccess"\]

conditions:

mfa_required: true

session_duration: "2hours"

SecurityAdministrator:

description: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šç®¡ç†"

accounts: \["security-\*", "audit-\*"\]

policies: \["SecurityAudit", "CustomSecurityAdmin"\]

conditions:

ip_restriction: "office_networks"

mfa_required: true

*\# äº‹æ¥­éƒ¨é–€æ¨©é™*

business_units:

ProductDeveloper:

description: "è£½å“é–‹ç™ºãƒãƒ¼ãƒ "

accounts: \["product-dev-\*", "product-staging-\*"\]

policies: \["EC2FullAccess", "S3Developer", "RDSReadAccess"\]

conditions:

time_restriction: "business_hours"

ProductionSupport:

description: "æœ¬ç•ªç’°å¢ƒç›£è¦–ãƒ»ã‚µãƒãƒ¼ãƒˆ"

accounts: \["product-prod-\*"\]

policies: \["CloudWatchReadOnly", "LimitedEC2Access"\]

conditions:

approval_required: true

max_session_duration: "4hours"

*\# ç’°å¢ƒåˆ¥æ¨©é™*

environment_specific:

DevelopmentFullAccess:

description: "é–‹ç™ºç’°å¢ƒãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹"

accounts: \["\*-dev-\*"\]

policies: \["PowerUserAccess"\]

ProductionReadOnly:

description: "æœ¬ç•ªç’°å¢ƒèª­ã¿å–ã‚Šå°‚ç”¨"

accounts: \["\*-prod-\*"\]

policies: \["ReadOnlyAccess", "SupportUser"\]

2.3 å±æ€§ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ (ABAC)

json

{

"abac_policy_template": {

"Version": "2012-10-17",

"Statement": \[

{

"Effect": "Allow",

"Action": "\*",

"Resource": "\*",

"Condition": {

"StringEquals": {

"aws:PrincipalTag/Department": "\${aws:RequestedRegion}",

"ec2:ResourceTag/Environment": "\${saml:Environment}",

"s3:ResourceTag/CostCenter": "\${saml:CostCenter}"

},

"DateGreaterThan": {

"aws:CurrentTime": "\${saml:SessionStart}"

},

"DateLessThan": {

"aws:CurrentTime": "\${saml:SessionEnd}"

}

}

}

\]

}

}

2.4 å¤–éƒ¨IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ

hcl

*\# Active Directoryçµ±åˆ*

resource "aws_ssoadmin_external_identity_provider_configuration"
"ad_integration" {

instance_arn = aws_ssoadmin_instances.main.arn

identity_provider_configuration {

external_identity_provider_type = "SAML"

saml_provider_configuration {

metadata_document =
file("\${path.module}/saml/technova-ad-metadata.xml")

}

}

}

*\# Google Workspaceçµ±åˆ (å°†æ¥å¯¾å¿œ)*

resource "aws_ssoadmin_external_identity_provider_configuration"
"google_workspace" {

instance_arn = aws_ssoadmin_instances.main.arn

identity_provider_configuration {

external_identity_provider_type = "OIDC"

oidc_provider_configuration {

issuer_url = "https://accounts.google.com"

authorization_endpoint = "https://accounts.google.com/o/oauth2/v2/auth"

token_endpoint = "https://oauth2.googleapis.com/token"

userinfo_endpoint = "https://openidconnect.googleapis.com/v1/userinfo"

jwks_uri = "https://www.googleapis.com/oauth2/v3/certs"

client_id = var.google_workspace_client_id

client_secret = var.google_workspace_client_secret

}

}

}

3\. è·å‹™åˆ†é›¢ã¨æœ€å°æ¨©é™ã®å®Ÿè£…

3.1 è·å‹™åˆ†é›¢ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

yaml

role_separation_matrix:

*\# é–‹ç™ºãƒãƒ¼ãƒ *

developers:

allowed_environments: \["dev", "staging"\]

forbidden_environments: \["prod"\]

allowed_actions:

\- "ec2:\*"

\- "s3:GetObject\*"

\- "s3:PutObject\*"

\- "rds:Describe\*"

forbidden_actions:

\- "iam:\*"

\- "organizations:\*"

\- "account:\*"

*\# ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ *

infrastructure:

allowed_environments: \["dev", "staging", "prod"\]

allowed_actions:

\- "ec2:\*"

\- "vpc:\*"

\- "route53:\*"

approval_required:

\- "iam:CreateRole"

\- "iam:AttachRolePolicy"

forbidden_actions:

\- "organizations:\*"

\- "account:CloseAccount"

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ *

security:

allowed_environments: \["all"\]

allowed_actions:

\- "iam:\*"

\- "organizations:\*"

\- "guardduty:\*"

\- "securityhub:\*"

read_only_access:

\- "logs:\*"

\- "cloudtrail:\*"

3.2 æœ€å°æ¨©é™ãƒãƒªã‚·ãƒ¼å®Ÿè£…

ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚·ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

json

{

"Version": "2012-10-17",

"Statement": \[

{

"Sid": "DeveloperBaseAccess",

"Effect": "Allow",

"Action": \[

"ec2:Describe\*",

"ec2:List\*",

"s3:GetObject",

"s3:PutObject"

\],

"Resource": "\*",

"Condition": {

"StringEquals": {

"aws:RequestedRegion": \["ap-northeast-1", "us-east-1"\],

"ec2:ResourceTag/Environment": \["dev", "staging"\]

},

"IpAddress": {

"aws:SourceIp": \[

"10.0.0.0/8",

"172.16.0.0/12"

\]

}

}

},

{

"Sid": "DenyProductionAccess",

"Effect": "Deny",

"Action": "\*",

"Resource": "\*",

"Condition": {

"StringEquals": {

"ec2:ResourceTag/Environment": "prod"

}

}

}

\]

}

å‹•çš„æ¨©é™åˆ¶å¾¡

hcl

*\# ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡*

resource "aws_iam_policy" "tag_based_access" {

name = "TagBasedResourceAccess"

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Action = \[

"ec2:StartInstances",

"ec2:StopInstances",

"ec2:RebootInstances"

\]

Resource = "\*"

Condition = {

StringEquals = {

"ec2:ResourceTag/Owner" = "\$\${saml:userid}"

"ec2:ResourceTag/Department" = "\$\${saml:department}"

}

}

}

\]

})

}

*\# æ™‚é–“åˆ¶é™ä»˜ãã‚¢ã‚¯ã‚»ã‚¹*

resource "aws_iam_policy" "time_based_access" {

name = "TimeBasedAccess"

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Action = "\*"

Resource = "\*"

Condition = {

DateGreaterThan = {

"aws:CurrentTime" = "08:00Z"

}

DateLessThan = {

"aws:CurrentTime" = "18:00Z"

}

StringEquals = {

"aws:RequestedRegion" = \["ap-northeast-1"\]

}

}

}

\]

})

}

3.3 Just-In-Time (JIT) ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†

python

*\# JITã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†Lambdaé–¢æ•°*

import boto3

import json

from datetime import datetime, timedelta

def lambda_handler(event, context):

"""

Just-In-Timeæ¨©é™æ˜‡æ ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†

"""

try:

*\# ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã®å–å¾—*

user_id = event\['user_id'\]

requested_permissions = event\['permissions'\]

business_justification = event\['justification'\]

duration_hours = event.get('duration', 2) *\# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ2æ™‚é–“*

*\# æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹*

approval_result = process_approval_workflow(

user_id, requested_permissions, business_justification

)

if approval_result\['approved'\]:

*\# ä¸€æ™‚çš„ãªæ¨©é™ã®ä»˜ä¸*

temp_role_arn = create_temporary_role(

user_id, requested_permissions, duration_hours

)

*\# è‡ªå‹•å‰Šé™¤ã®äºˆç´„*

schedule_role_deletion(temp_role_arn, duration_hours)

return {

'statusCode': 200,

'body': json.dumps({

'status': 'approved',

'temporary_role_arn': temp_role_arn,

'expires_at': (datetime.now() +
timedelta(hours=duration_hours)).isoformat(),

'instructions': 'aws sts assume-role --role-arn ' + temp_role_arn

})

}

else:

return {

'statusCode': 403,

'body': json.dumps({

'status': 'denied',

'reason': approval_result\['reason'\]

})

}

except Exception as e:

return {

'statusCode': 500,

'body': json.dumps({'error': str(e)})

}

def process_approval_workflow(user_id, permissions, justification):

"""

æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å‡¦ç†

"""

*\# ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ã®è©•ä¾¡*

risk_level = evaluate_risk_level(permissions)

if risk_level == 'LOW':

*\# è‡ªå‹•æ‰¿èª*

return {'approved': True, 'reason': 'Auto-approved: Low risk'}

elif risk_level == 'MEDIUM':

*\# ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼æ‰¿èªãŒå¿…è¦*

return initiate_manager_approval(user_id, justification)

else:

*\# è¤‡æ•°ãƒ¬ãƒ™ãƒ«ã®æ‰¿èªãŒå¿…è¦*

return initiate_multi_level_approval(user_id, justification)

def create_temporary_role(user_id, permissions, duration_hours):

"""

ä¸€æ™‚çš„ãªIAMãƒ­ãƒ¼ãƒ«ã®ä½œæˆ

"""

iam = boto3.client('iam')

*\# ãƒ­ãƒ¼ãƒ«åã®ç”Ÿæˆ*

role_name = f"TempAccess-{user_id}-{int(datetime.now().timestamp())}"

*\# ä¿¡é ¼ãƒãƒªã‚·ãƒ¼*

assume_role_policy = {

"Version": "2012-10-17",

"Statement": \[

{

"Effect": "Allow",

"Principal": {"AWS":
f"arn:aws:iam::{boto3.client('sts').get_caller_identity()\['Account'\]}:user/{user_id}"},

"Action": "sts:AssumeRole",

"Condition": {

"StringEquals": {

"sts:ExternalId": generate_external_id(user_id)

}

}

}

\]

}

*\# ãƒ­ãƒ¼ãƒ«ä½œæˆ*

response = iam.create_role(

RoleName=role_name,

AssumeRolePolicyDocument=json.dumps(assume_role_policy),

Description=f"Temporary elevated access for {user_id}",

MaxSessionDuration=duration_hours \* 3600,

Tags=\[

{'Key': 'Purpose', 'Value': 'JIT-Access'},

{'Key': 'User', 'Value': user_id},

{'Key': 'ExpiresAt', 'Value': (datetime.now() +
timedelta(hours=duration_hours)).isoformat()}

\]

)

*\# æ¨©é™ã®ä»˜ä¸*

for permission in permissions:

iam.attach_role_policy(

RoleName=role_name,

PolicyArn=permission\['policy_arn'\]

)

return response\['Role'\]\['Arn'\]

4\. ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™ç®¡ç†

4.1 ä¿¡é ¼é–¢ä¿‚è¨­è¨ˆ

yaml

cross_account_trust_model:

*\# ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â†’ å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ*

management_account:

trust_direction: "outbound"

trusted_accounts: \["all_organization_accounts"\]

permitted_roles:

\- "OrganizationAccountAccessRole"

\- "SecurityAuditRole"

conditions:

\- "mfa_required: true"

\- "source_ip_restriction: office_networks"

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â†’ å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰*

security_account:

trust_direction: "outbound"

trusted_accounts: \["all_organization_accounts"\]

permitted_roles:

\- "SecurityAuditRole"

permissions: \["read_only", "security_findings"\]

*\# ãƒ­ã‚°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â†’ å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ­ã‚°åé›†ï¼‰*

logging_account:

trust_direction: "inbound"

trusting_accounts: \["all_organization_accounts"\]

permitted_actions:

\- "logs:CreateLogGroup"

\- "logs:CreateLogStream"

\- "logs:PutLogEvents"

4.2 ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®å®Ÿè£…

hcl

*\# çµ„ç¹”ãƒ¬ãƒ™ãƒ«ã§ã®ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«*

resource "aws_iam_role" "cross_account_security_audit" {

for_each = toset(var.organization_account_ids)

name = "CrossAccountSecurityAudit"

assume_role_policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Principal = {

AWS = "arn:aws:iam::\${var.security_account_id}:root"

}

Action = "sts:AssumeRole"

Condition = {

StringEquals = {

"sts:ExternalId" = var.cross_account_external_id

}

Bool = {

"aws:MultiFactorAuthPresent" = "true"

}

IpAddress = {

"aws:SourceIp" = var.allowed_ip_ranges

}

}

}

\]

})

tags = {

Purpose = "Cross-Account Security Audit"

ManagedBy = "Terraform"

}

}

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ç”¨ã®çµ±ä¸€ãƒãƒªã‚·ãƒ¼*

resource "aws_iam_role_policy_attachment" "security_audit_policy" {

for_each = toset(var.organization_account_ids)

role = aws_iam_role.cross_account_security_audit\[each.key\].name

policy_arn = "arn:aws:iam::aws:policy/SecurityAudit"

}

*\# ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼*

resource "aws_iam_role_policy" "custom_security_audit" {

for_each = toset(var.organization_account_ids)

name = "CustomSecurityAuditPolicy"

role = aws_iam_role.cross_account_security_audit\[each.key\].id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Action = \[

"access-analyzer:List\*",

"access-analyzer:Get\*",

"guardduty:List\*",

"guardduty:Get\*",

"securityhub:List\*",

"securityhub:Get\*",

"config:List\*",

"config:Get\*",

"config:Describe\*"

\]

Resource = "\*"

},

{

Effect = "Allow"

Action = \[

"s3:GetBucketPolicy",

"s3:GetBucketAcl",

"s3:GetBucketPublicAccessBlock"

\]

Resource = "\*"

}

\]

})

}

4.3 ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“é€šä¿¡åˆ¶å¾¡

hcl

*\# VPC ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒãƒªã‚·ãƒ¼ï¼ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“åˆ¶é™ï¼‰*

resource "aws_vpc_endpoint_policy" "s3_cross_account_policy" {

vpc_endpoint_id = aws_vpc_endpoint.s3.id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Principal = "\*"

Action = \[

"s3:GetObject",

"s3:PutObject"

\]

Resource = "\*"

Condition = {

StringEquals = {

"aws:PrincipalAccount" = var.trusted_account_ids

}

}

},

{

Effect = "Deny"

Principal = "\*"

Action = "\*"

Resource = "\*"

Condition = {

StringNotEquals = {

"aws:PrincipalAccount" = var.trusted_account_ids

}

}

}

\]

})

}

*\# ãƒªã‚½ãƒ¼ã‚¹ãƒ™ãƒ¼ã‚¹ãƒãƒªã‚·ãƒ¼ä¾‹ï¼ˆS3ãƒã‚±ãƒƒãƒˆï¼‰*

resource "aws_s3_bucket_policy" "cross_account_access" {

bucket = aws_s3_bucket.shared_resources.id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Sid = "CrossAccountAccess"

Effect = "Allow"

Principal = {

AWS = \[

for account_id in var.trusted_account_ids :

"arn:aws:iam::\${account_id}:root"

\]

}

Action = \[

"s3:GetObject",

"s3:PutObject"

\]

Resource = "\${aws_s3_bucket.shared_resources.arn}/\*"

Condition = {

StringEquals = {

"s3:x-amz-server-side-encryption" = "aws:kms"

}

Bool = {

"aws:SecureTransport" = "true"

}

}

}

\]

})

}

5\. ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ»ç›£æŸ»å¯¾å¿œ

5.1 æ³•çš„è¦ä»¶ã¸ã®å¯¾å¿œ

yaml

compliance_frameworks:

*\# SOC 2 Type II*

soc2_type2:

requirements:

\- "ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®æ–‡æ›¸åŒ–"

\- "æ¨©é™å¤‰æ›´ã®æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹"

\- "å®šæœŸçš„ãªã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼"

\- "ç‰¹æ¨©ã‚¢ã‚¯ã‚»ã‚¹ã®ç›£è¦–"

implementation:

access_control_documentation: "IAM Policyæ–‡æ›¸åŒ–"

approval_process: "ServiceNowçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"

periodic_review: "å››åŠæœŸã‚¢ã‚¯ã‚»ã‚¹èªè¨¼"

privileged_monitoring: "CloudTrail + GuardDuty"

*\# ISO 27001*

iso27001:

requirements:

\- "æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ (ISMS)"

\- "ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã¨ãƒªã‚¹ã‚¯å‡¦ç†"

\- "ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†"

\- "æš—å·åŒ–"

implementation:

isms: "AWS Config Rules + Security Hub"

risk_assessment: "AWS Well-Architected Framework"

access_management: "IAM Identity Center + Access Analyzer"

encryption: "KMS + CloudTrailæš—å·åŒ–"

*\# PCI DSS (ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆé–¢é€£)*

pci_dss:

scope: "æ±ºæ¸ˆå‡¦ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ"

requirements:

\- "ã‚«ãƒ¼ãƒ‰ä¼šå“¡ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™"

\- "ä¸€æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®å‰²ã‚Šå½“ã¦"

\- "ç‰©ç†çš„ãƒ»è«–ç†çš„ã‚¢ã‚¯ã‚»ã‚¹ã®åˆ¶é™"

\- "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚½ãƒ¼ã‚¹ã¨CADã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ç›£è¦–"

implementation:

data_access_restriction: "å°‚ç”¨VPC + ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—"

unique_user_id: "IAM Identity Centerå¼·åˆ¶"

access_restriction: "MFA + IPåˆ¶é™"

monitoring: "VPC Flow Logs + GuardDuty"

5.2 ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹

hcl

*\# AWS Config Rules for ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç›£è¦–*

resource "aws_config_configuration_recorder" "compliance_recorder" {

name = "TechNovaComplianceRecorder"

role_arn = aws_iam_role.config_role.arn

recording_group {

all_supported = true

include_global_resource_types = true

}

}

*\# SOC 2ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç”¨Config Rules*

resource "aws_config_config_rule" "soc2_mfa_enabled" {

name = "soc2-mfa-enabled-for-console-access"

source {

owner = "AWS"

source_identifier = "MFA_ENABLED_FOR_ROOT"

}

depends_on = \[aws_config_configuration_recorder.compliance_recorder\]

}

resource "aws_config_config_rule" "soc2_password_policy" {

name = "soc2-iam-password-policy"

source {

owner = "AWS"

source_identifier = "IAM_PASSWORD_POLICY"

}

input_parameters = jsonencode({

RequireUppercaseCharacters = "true"

RequireLowercaseCharacters = "true"

RequireSymbols = "true"

RequireNumbers = "true"

MinimumPasswordLength = "14"

PasswordReusePrevention = "12"

MaxPasswordAge = "90"

})

}

*\# ISO 27001ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç”¨Rules*

resource "aws_config_config_rule" "iso27001_encryption_at_rest" {

name = "iso27001-s3-bucket-server-side-encryption-enabled"

source {

owner = "AWS"

source_identifier = "S3_BUCKET_SERVER_SIDE_ENCRYPTION_ENABLED"

}

}

*\# PCI DSSã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç”¨Rulesï¼ˆæ±ºæ¸ˆå‡¦ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰*

resource "aws_config_config_rule" "pci_dss_security_groups" {

count = contains(var.pci_scope_accounts,
data.aws_caller_identity.current.account_id) ? 1 : 0

name = "pci-dss-security-groups-restricted"

source {

owner = "AWS"

å†è©¦è¡Œ

C

ç¶šã‘ã‚‹

ç·¨é›†

owner = "AWS" source_identifier = "INCOMING_SSH_DISABLED" } }

resource "aws_config_config_rule" "pci_dss_root_access_key" { count =
contains(var.pci_scope_accounts,
data.aws_caller_identity.current.account_id) ? 1 : 0

name = "pci-dss-root-access-key-check"

source { owner = "AWS" source_identifier = "ROOT_ACCESS_KEY_CHECK" } }

\### 5.3 ç›£æŸ»è¨¼è·¡ã®è¨­è¨ˆ

\`\`\`hcl

\# çµ„ç¹”ãƒ¬ãƒ™ãƒ«ã®CloudTrailè¨­å®š

resource "aws_cloudtrail" "organization_trail" {

name = "TechNova-Organization-AuditTrail"

s3_bucket_name = aws_s3_bucket.audit_logs.bucket

\# çµ„ç¹”å…¨ä½“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜éŒ²

is_organization_trail = true

is_multi_region_trail = true

\# ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ™ãƒ³ãƒˆã®è¨˜éŒ²

event_selector {

read_write_type = "All"

include_management_events = true

exclude_management_event_sources = \[\]

data_resource {

type = "AWS::S3::Object"

values = \["arn:aws:s3:::\*/sensitive-data/\*"\]

}

data_resource {

type = "AWS::KMS::Key"

values = \["\*"\]

}

}

\# æ´å¯Ÿã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼ˆç•°å¸¸æ¤œçŸ¥ï¼‰

insight_selector {

insight_type = "ApiCallRateInsight"

}

tags = {

Purpose = "Compliance Audit Trail"

Compliance = "SOC2,ISO27001,PCI-DSS"

}

}

\# ç›£æŸ»ãƒ­ã‚°ç”¨S3ãƒã‚±ãƒƒãƒˆ

resource "aws_s3_bucket" "audit_logs" {

bucket = "technova-audit-logs-\${random_id.audit_suffix.hex}"

tags = {

Purpose = "Audit Log Storage"

Retention = "7years"

Compliance = "SOC2,ISO27001"

}

}

resource "aws_s3_bucket_lifecycle_configuration" "audit_logs_lifecycle"
{

bucket = aws_s3_bucket.audit_logs.id

rule {

id = "audit_log_retention"

status = "Enabled"

\# 90æ—¥å¾Œã«IAç§»è¡Œ

transition {

days = 90

storage_class = "STANDARD_IA"

}

\# 1å¹´å¾Œã«Glacierç§»è¡Œ

transition {

days = 365

storage_class = "GLACIER"

}

\# 7å¹´å¾Œã«Deep Archiveç§»è¡Œ

transition {

days = 2555 \# 7å¹´

storage_class = "DEEP_ARCHIVE"

}

\# 10å¹´å¾Œã«å‰Šé™¤

expiration {

days = 3650 \# 10å¹´

}

}

}

\# ç›£æŸ»ãƒ­ã‚°ã¸ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹é˜²æ­¢

resource "aws_s3_bucket_policy" "audit_logs_policy" {

bucket = aws_s3_bucket.audit_logs.id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Sid = "DenyDirectAccess"

Effect = "Deny"

Principal = "\*"

Action = "s3:\*"

Resource = \[

aws_s3_bucket.audit_logs.arn,

"\${aws_s3_bucket.audit_logs.arn}/\*"

\]

Condition = {

StringNotEquals = {

"aws:PrincipalServiceName" = \[

"cloudtrail.amazonaws.com",

"config.amazonaws.com"

\]

}

StringNotLike = {

"aws:PrincipalArn" = \[

"arn:aws:iam::\${var.audit_account_id}:role/AuditRole\*"

\]

}

}

},

{

Sid = "AllowAuditAccountReadOnly"

Effect = "Allow"

Principal = {

AWS = "arn:aws:iam::\${var.audit_account_id}:root"

}

Action = \[

"s3:GetObject",

"s3:ListBucket"

\]

Resource = \[

aws_s3_bucket.audit_logs.arn,

"\${aws_s3_bucket.audit_logs.arn}/\*"

\]

Condition = {

Bool = {

"aws:MultiFactorAuthPresent" = "true"

}

}

}

\]

})

}

5.4 ã‚¢ã‚¯ã‚»ã‚¹èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹

python

*\# å››åŠæœŸã‚¢ã‚¯ã‚»ã‚¹èªè¨¼ã®è‡ªå‹•åŒ–*

import boto3

import json

from datetime import datetime, timedelta

import csv

class AccessCertificationManager:

def \_\_init\_\_(self):

self.iam_client = boto3.client('iam')

self.identity_store = boto3.client('identitystore')

self.sso_admin = boto3.client('sso-admin')

def generate_access_report(self):

"""

å…¨çµ„ç¹”ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

"""

report = {

'generated_at': datetime.now().isoformat(),

'certification_period': self.\_get_certification_period(),

'accounts': \[\]

}

*\# å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’åé›†*

for account in self.\_get_organization_accounts():

account_report = self.\_analyze_account_access(account\['Id'\])

report\['accounts'\].append(account_report)

return report

def \_get_certification_period(self):

"""

èªè¨¼æœŸé–“ã®å–å¾—ï¼ˆå››åŠæœŸï¼‰

"""

now = datetime.now()

quarter_start = datetime(now.year, ((now.month - 1) // 3) \* 3 + 1, 1)

quarter_end = quarter_start + timedelta(days=90)

return {

'start': quarter_start.isoformat(),

'end': quarter_end.isoformat()

}

def \_analyze_account_access(self, account_id):

"""

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ†æ

"""

try:

*\# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã®IAMãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æ*

users_analysis = self.\_analyze_iam_users(account_id)

*\# ãƒ­ãƒ¼ãƒ«åˆ†æ*

roles_analysis = self.\_analyze_iam_roles(account_id)

*\# SSO Permission Setsåˆ†æ*

sso_analysis = self.\_analyze_sso_assignments(account_id)

return {

'account_id': account_id,

'analysis_date': datetime.now().isoformat(),

'iam_users': users_analysis,

'iam_roles': roles_analysis,

'sso_assignments': sso_analysis,

'compliance_score': self.\_calculate_compliance_score(

users_analysis, roles_analysis, sso_analysis

)

}

except Exception as e:

return {

'account_id': account_id,

'error': str(e),

'analysis_date': datetime.now().isoformat()

}

def \_analyze_iam_users(self, account_id):

"""

IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ†æ

"""

*\# AssumeRoleã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹*

assumed_role = self.\_assume_audit_role(account_id)

target_iam = boto3.client('iam',

aws_access_key_id=assumed_role\['AccessKeyId'\],

aws_secret_access_key=assumed_role\['SecretAccessKey'\],

aws_session_token=assumed_role\['SessionToken'\]

)

users = target_iam.list_users()\['Users'\]

user_analysis = \[\]

for user in users:

*\# æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª*

last_activity = self.\_get_user_last_activity(target_iam,
user\['UserName'\])

*\# ä»˜ä¸ã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ç¢ºèª*

attached_policies = self.\_get_user_policies(target_iam,
user\['UserName'\])

*\# MFAè¨­å®šç¢ºèª*

mfa_devices = target_iam.list_mfa_devices(UserName=user\['UserName'\])

user_analysis.append({

'username': user\['UserName'\],

'creation_date': user\['CreateDate'\].isoformat(),

'last_activity': last_activity,

'attached_policies': attached_policies,

'mfa_enabled': len(mfa_devices\['MFADevices'\]) \> 0,

'compliance_issues': self.\_identify_user_compliance_issues(

user, last_activity, attached_policies, mfa_devices

)

})

return user_analysis

def \_identify_user_compliance_issues(self, user, last_activity,
policies, mfa_devices):

"""

ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹å•é¡Œã®ç‰¹å®š

"""

issues = \[\]

*\# 90æ—¥ä»¥ä¸Šæœªä½¿ç”¨*

if last_activity and (datetime.now() - last_activity).days \> 90:

issues.append({

'type': 'UNUSED_ACCOUNT',

'severity': 'MEDIUM',

'description': f'Account unused for {(datetime.now() -
last_activity).days} days'

})

*\# MFAæœªè¨­å®š*

if len(mfa_devices\['MFADevices'\]) == 0:

issues.append({

'type': 'MFA_NOT_ENABLED',

'severity': 'HIGH',

'description': 'Multi-Factor Authentication not enabled'

})

*\# éå‰°æ¨©é™ã®æ¤œçŸ¥*

if any('AdministratorAccess' in policy\['PolicyName'\] for policy in
policies):

issues.append({

'type': 'EXCESSIVE_PRIVILEGES',

'severity': 'HIGH',

'description': 'Administrator access granted to regular user'

})

return issues

def generate_certification_tasks(self, access_report):

"""

èªè¨¼ã‚¿ã‚¹ã‚¯ã®ç”Ÿæˆ

"""

certification_tasks = \[\]

for account in access_report\['accounts'\]:

for user in account.get('iam_users', \[\]):

if user.get('compliance_issues'):

task = {

'account_id': account\['account_id'\],

'user': user\['username'\],

'issues': user\['compliance_issues'\],

'recommended_actions':
self.\_generate_remediation_actions(user\['compliance_issues'\]),

'assigned_to': self.\_determine_assignee(account\['account_id'\],
user\['username'\]),

'due_date': (datetime.now() + timedelta(days=30)).isoformat()

}

certification_tasks.append(task)

return certification_tasks

def \_generate_remediation_actions(self, issues):

"""

ä¿®å¾©ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ç”Ÿæˆ

"""

actions = \[\]

for issue in issues:

if issue\['type'\] == 'UNUSED_ACCOUNT':

actions.append('Disable or remove unused account')

elif issue\['type'\] == 'MFA_NOT_ENABLED':

actions.append('Enable Multi-Factor Authentication')

elif issue\['type'\] == 'EXCESSIVE_PRIVILEGES':

actions.append('Review and reduce privileges to minimum required')

return actions

*\# å®Ÿè¡Œä¾‹*

def lambda_handler(event, context):

"""

å››åŠæœŸã‚¢ã‚¯ã‚»ã‚¹èªè¨¼Lambdaé–¢æ•°

"""

cert_manager = AccessCertificationManager()

*\# ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ*

access_report = cert_manager.generate_access_report()

*\# èªè¨¼ã‚¿ã‚¹ã‚¯ç”Ÿæˆ*

certification_tasks =
cert_manager.generate_certification_tasks(access_report)

*\# ãƒ¬ãƒãƒ¼ãƒˆã‚’S3ã«ä¿å­˜*

s3_client = boto3.client('s3')

report_key =
f"access-certification/{datetime.now().strftime('%Y-%Q')}/access-report.json"

s3_client.put_object(

Bucket=os.environ\['COMPLIANCE_BUCKET'\],

Key=report_key,

Body=json.dumps(access_report, indent=2, default=str),

ContentType='application/json'

)

*\# ServiceNowã«ã‚¿ã‚¹ã‚¯ä½œæˆï¼ˆçµ±åˆã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰*

if os.environ.get('SERVICENOW_INTEGRATION'):

create_servicenow_tasks(certification_tasks)

*\# é€šçŸ¥é€ä¿¡*

send_certification_notification(len(certification_tasks), report_key)

return {

'statusCode': 200,

'body': json.dumps({

'report_generated': True,

'tasks_created': len(certification_tasks),

's3_location': f"s3://{os.environ\['COMPLIANCE_BUCKET'\]}/{report_key}"

})

}

6\. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¢ƒç•Œè¨­è¨ˆ

6.1 å¤šå±¤é˜²å¾¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

yaml

security_layers:

*\# ãƒ¬ã‚¤ãƒ¤ãƒ¼1: ç‰©ç†çš„å¢ƒç•Œï¼ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ†é›¢ï¼‰*

account_isolation:

principle: "å®Œå…¨ãªè«–ç†åˆ†é›¢"

implementation: "AWS Organizations + SCP"

scope: "120ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆ"

*\# ãƒ¬ã‚¤ãƒ¤ãƒ¼2: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¢ƒç•Œ*

network_isolation:

principle: "ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"

implementation: "VPC + Security Groups + NACLs"

scope: "VPCé–“é€šä¿¡åˆ¶å¾¡"

*\# ãƒ¬ã‚¤ãƒ¤ãƒ¼3: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¢ƒç•Œ*

application_isolation:

principle: "ãƒã‚¤ã‚¯ãƒ­ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"

implementation: "IAM + Resource Tags + Policies"

scope: "ãƒªã‚½ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡"

*\# ãƒ¬ã‚¤ãƒ¤ãƒ¼4: ãƒ‡ãƒ¼ã‚¿å¢ƒç•Œ*

data_isolation:

principle: "æš—å·åŒ–ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡"

implementation: "KMS + S3 Bucket Policies + Database Security"

scope: "ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒ™ãƒ«ä¿è­·"

6.2 Service Control Policies (SCP) å®Ÿè£…

json

{

"Version": "2012-10-17",

"Statement": \[

{

"Sid": "DenyRootUserActions",

"Effect": "Deny",

"Principal": "\*",

"Action": "\*",

"Resource": "\*",

"Condition": {

"StringEquals": {

"aws:PrincipalType": "Root"

},

"StringNotEquals": {

"aws:PrincipalServiceName": \[

"cloudformation.amazonaws.com",

"config.amazonaws.com"

\]

}

}

},

{

"Sid": "RestrictRegions",

"Effect": "Deny",

"Principal": "\*",

"Action": "\*",

"Resource": "\*",

"Condition": {

"StringNotEquals": {

"aws:RequestedRegion": \[

"ap-northeast-1",

"us-east-1",

"eu-west-1"

\]

},

"ForAllValues:StringNotEquals": {

"aws:PrincipalServiceName": \[

"cloudformation.amazonaws.com",

"support.amazonaws.com"

\]

}

}

},

{

"Sid": "DenyUnencryptedStorage",

"Effect": "Deny",

"Principal": "\*",

"Action": \[

"s3:PutObject",

"rds:CreateDBInstance",

"ec2:CreateVolume"

\],

"Resource": "\*",

"Condition": {

"Bool": {

"aws:SecureTransport": "false"

}

}

},

{

"Sid": "RestrictInstanceTypes",

"Effect": "Deny",

"Principal": "\*",

"Action": \[

"ec2:RunInstances",

"ec2:StartInstances"

\],

"Resource": "arn:aws:ec2:\*:\*:instance/\*",

"Condition": {

"ForAllValues:StringNotLike": {

"ec2:InstanceType": \[

"t3.\*",

"t4g.\*",

"m5.\*",

"m6i.\*",

"c5.\*",

"c6i.\*"

\]

}

}

}

\]

}

6.3 ãƒ‡ãƒ¼ã‚¿åˆ†é¡ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

hcl

*\# ãƒ‡ãƒ¼ã‚¿åˆ†é¡ã«åŸºã¥ãS3ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼*

resource "aws_s3_bucket_policy" "data_classification_policy" {

bucket = aws_s3_bucket.classified_data.id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Sid = "RestrictedDataAccess"

Effect = "Allow"

Principal = {

AWS = \[

"arn:aws:iam::\${data.aws_caller_identity.current.account_id}:role/DataScientistRole",

"arn:aws:iam::\${data.aws_caller_identity.current.account_id}:role/ComplianceAuditorRole"

\]

}

Action = \[

"s3:GetObject"

\]

Resource = "\${aws_s3_bucket.classified_data.arn}/restricted/\*"

Condition = {

StringEquals = {

"s3:x-amz-server-side-encryption" = "aws:kms",

"aws:userid" = \[

"\${aws_iam_role.data_scientist.unique_id}:\*",

"\${aws_iam_role.compliance_auditor.unique_id}:\*"

\]

}

Bool = {

"aws:MultiFactorAuthPresent" = "true"

}

DateGreaterThan = {

"aws:TokenIssueTime" = "2024-01-01T00:00:00Z"

}

}

},

{

Sid = "PublicDataAccess"

Effect = "Allow"

Principal = {

AWS =
"arn:aws:iam::\${data.aws_caller_identity.current.account_id}:root"

}

Action = \[

"s3:GetObject"

\]

Resource = "\${aws_s3_bucket.classified_data.arn}/public/\*"

},

{

Sid = "DenyUnencryptedUploads"

Effect = "Deny"

Principal = "\*"

Action = "s3:PutObject"

Resource = "\${aws_s3_bucket.classified_data.arn}/\*"

Condition = {

StringNotEquals = {

"s3:x-amz-server-side-encryption" = "aws:kms"

}

}

}

\]

})

}

*\# KMSã‚­ãƒ¼ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–åˆ¶å¾¡*

resource "aws_kms_key" "data_encryption_key" {

description = "Data encryption key with role-based access"

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Sid = "Enable IAM User Permissions"

Effect = "Allow"

Principal = {

AWS =
"arn:aws:iam::\${data.aws_caller_identity.current.account_id}:root"

}

Action = "kms:\*"

Resource = "\*"

},

{

Sid = "Allow use of the key for specific roles"

Effect = "Allow"

Principal = {

AWS = \[

aws_iam_role.data_scientist.arn,

aws_iam_role.compliance_auditor.arn

\]

}

Action = \[

"kms:Encrypt",

"kms:Decrypt",

"kms:ReEncrypt\*",

"kms:GenerateDataKey\*",

"kms:DescribeKey"

\]

Resource = "\*"

Condition = {

StringEquals = {

"kms:ViaService": \[

"s3.ap-northeast-1.amazonaws.com",

"rds.ap-northeast-1.amazonaws.com"

\]

}

}

}

\]

})

tags = {

Purpose = "Data Classification Encryption"

DataClassification = "Restricted"

}

}

7\. ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†

7.1 Break Glass ã‚¢ã‚¯ã‚»ã‚¹è¨­è¨ˆ

hcl

*\# ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®IAMãƒ­ãƒ¼ãƒ«*

resource "aws_iam_role" "emergency_access_role" {

name = "EmergencyBreakGlassRole"

assume_role_policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Principal = {

AWS = \[

for user in var.emergency_access_users :

"arn:aws:iam::\${data.aws_caller_identity.current.account_id}:user/\${user}"

\]

}

Action = "sts:AssumeRole"

Condition = {

Bool = {

"aws:MultiFactorAuthPresent" = "true"

}

StringEquals = {

"sts:ExternalId" = var.emergency_external_id

}

IpAddress = {

"aws:SourceIp" = var.emergency_access_ips

}

}

}

\]

})

*\# ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé–“ã‚’1æ™‚é–“ã«åˆ¶é™*

max_session_duration = 3600

tags = {

Purpose = "Emergency Break Glass Access"

CriticalRole = "true"

}

}

*\# ç·Šæ€¥æ™‚ç”¨ã®ãƒãƒªã‚·ãƒ¼ï¼ˆåˆ¶é™ä»˜ãAdministratorAccessï¼‰*

resource "aws_iam_role_policy" "emergency_access_policy" {

name = "EmergencyAccessPolicy"

role = aws_iam_role.emergency_access_role.id

policy = jsonencode({

Version = "2012-10-17"

Statement = \[

{

Effect = "Allow"

Action = "\*"

Resource = "\*"

Condition = {

StringNotEquals = {

"aws:PrincipalServiceName": \[

"organizations.amazonaws.com",

"account.amazonaws.com"

\]

}

}

},

{

Effect = "Deny"

Action = \[

"organizations:\*",

"account:CloseAccount",

"iam:DeleteRole",

"iam:DeleteUser"

\]

Resource = "\*"

}

\]

})

}

7.2 ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 

python

*\# ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç›£è¦–Lambdaé–¢æ•°*

import boto3

import json

import os

from datetime import datetime

def lambda_handler(event, context):

"""

Break Glassãƒ­ãƒ¼ãƒ«ã®ä½¿ç”¨ã‚’ç›£è¦–ãƒ»é€šçŸ¥

"""

try:

*\# CloudTrailã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œå‡º*

records = event.get('Records', \[\])

for record in records:

if 'cloudtrail' in record.get('eventSource', '').lower():

cloudtrail_data = json.loads(record\['body'\])

*\# AssumeRoleã‚¤ãƒ™ãƒ³ãƒˆã®ç¢ºèª*

if cloudtrail_data.get('eventName') == 'AssumeRole':

role_arn = cloudtrail_data.get('responseElements',
{}).get('assumedRoleUser', {}).get('arn', '')

*\# Break Glassãƒ­ãƒ¼ãƒ«ã®ä½¿ç”¨æ¤œå‡º*

if 'EmergencyBreakGlassRole' in role_arn:

handle_emergency_access_event(cloudtrail_data)

except Exception as e:

print(f"Error processing emergency access event: {str(e)}")

send_error_notification(str(e))

return {'statusCode': 200}

def handle_emergency_access_event(event_data):

"""

ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†

"""

*\# ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã®æŠ½å‡º*

user_identity = event_data.get('userIdentity', {})

source_ip = event_data.get('sourceIPAddress', 'Unknown')

event_time = event_data.get('eventTime', datetime.now().isoformat())

user_name = user_identity.get('userName', 'Unknown')

mfa_used = event_data.get('requestContext', {}).get('mfaAuthenticated',
False)

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æƒ…å ±ã®åé›†*

security_context = {

'user_name': user_name,

'source_ip': source_ip,

'event_time': event_time,

'mfa_authenticated': mfa_used,

'user_agent': event_data.get('userAgent', 'Unknown'),

'aws_region': event_data.get('awsRegion', 'Unknown')

}

*\# DynamoDBã«è¨˜éŒ²*

record_emergency_access(security_context)

*\# å³åº§ã«é€šçŸ¥é€ä¿¡*

send_emergency_access_alert(security_context)

*\# è¿½åŠ ã®ç›£è¦–é–‹å§‹*

initiate_enhanced_monitoring(user_name, source_ip)

def record_emergency_access(security_context):

"""

ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’DynamoDBã«è¨˜éŒ²

"""

dynamodb = boto3.resource('dynamodb')

table = dynamodb.Table(os.environ\['EMERGENCY_ACCESS_TABLE'\])

try:

table.put_item(

Item={

'access_id':
f"{security_context\['user_name'\]}-{security_context\['event_time'\]}",

'user_name': security_context\['user_name'\],

'source_ip': security_context\['source_ip'\],

'event_time': security_context\['event_time'\],

'mfa_authenticated': security_context\['mfa_authenticated'\],

'user_agent': security_context\['user_agent'\],

'aws_region': security_context\['aws_region'\],

'status': 'ACTIVE',

'created_at': datetime.now().isoformat(),

'ttl': int((datetime.now().timestamp() + (365 \* 24 \* 60 \* 60))) *\#
1å¹´ä¿æŒ*

}

)

except Exception as e:

print(f"Failed to record emergency access: {str(e)}")

def send_emergency_access_alert(security_context):

"""

ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ã‚¢ãƒ©ãƒ¼ãƒˆã®é€ä¿¡

"""

sns = boto3.client('sns')

*\# ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä½œæˆ*

alert_message = f"""

ğŸš¨ CRITICAL: Emergency Break Glass Access Detected ğŸš¨

User: {security_context\['user_name'\]}

Time: {security_context\['event_time'\]}

Source IP: {security_context\['source_ip'\]}

MFA Used: {'Yes' if security_context\['mfa_authenticated'\] else 'No'}

User Agent: {security_context\['user_agent'\]}

Region: {security_context\['aws_region'\]}

This is an automated alert for emergency administrative access.

Immediate investigation required.

Security Dashboard: https://console.aws.amazon.com/securityhub/

CloudTrail Logs: https://console.aws.amazon.com/cloudtrail/

"""

*\# è¤‡æ•°ãƒãƒ£ãƒãƒ«ã«é€šçŸ¥*

notification_topics = \[

os.environ\['SECURITY_ALERTS_TOPIC'\],

os.environ\['EMERGENCY_ALERTS_TOPIC'\]

\]

for topic_arn in notification_topics:

try:

sns.publish(

TopicArn=topic_arn,

Subject="ğŸš¨ EMERGENCY: Break Glass Access Detected",

Message=alert_message

)

except Exception as e:

print(f"Failed to send alert to {topic_arn}: {str(e)}")

def initiate_enhanced_monitoring(user_name, source_ip):

"""

ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹å¾Œã®å¼·åŒ–ç›£è¦–é–‹å§‹

"""

cloudwatch = boto3.client('cloudwatch')

*\# ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¢ãƒ©ãƒ¼ãƒ ã®ä½œæˆ*

try:

cloudwatch.put_metric_alarm(

AlarmName=f'EmergencyAccess-{user_name}-EnhancedMonitoring',

ComparisonOperator='GreaterThanThreshold',

EvaluationPeriods=1,

MetricName='APICallCount',

Namespace='TechNova/EmergencyAccess',

Period=300, *\# 5åˆ†é–“éš”*

Statistic='Sum',

Threshold=50.0, *\# 5åˆ†é–“ã§50å›ä»¥ä¸Šã®APIå‘¼ã³å‡ºã—*

ActionsEnabled=True,

AlarmActions=\[

os.environ\['EMERGENCY_ALERTS_TOPIC'\]

\],

AlarmDescription=f'Enhanced monitoring for emergency access by
{user_name}',

Dimensions=\[

{

'Name': 'UserName',

'Value': user_name

},

{

'Name': 'SourceIP',

'Value': source_ip

}

\]

)

except Exception as e:

print(f"Failed to create enhanced monitoring alarm: {str(e)}")

7.3 ç·Šæ€¥æ™‚ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£

yaml

emergency_procedures:

*\# ãƒ¬ãƒ™ãƒ«1: ã‚µãƒ¼ãƒ“ã‚¹éšœå®³å¯¾å¿œ*

service_outage:

trigger: "é‡è¦ã‚µãƒ¼ãƒ“ã‚¹ã®å®Œå…¨åœæ­¢"

response_time: "15åˆ†ä»¥å†…"

authorized_personnel:

\- "SREãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼"

\- "ITãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"

access_scope: "å½±éŸ¿ã‚’å—ã‘ãŸã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿"

approval_process: "å£é ­æ‰¿èª + äº‹å¾Œå ±å‘Š"

*\# ãƒ¬ãƒ™ãƒ«2: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ*

security_incident:

trigger: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¾µå®³ã®ç–‘ã„"

response_time: "5åˆ†ä»¥å†…"

authorized_personnel:

\- "CISOã¾ãŸã¯ä»£ç†"

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼"

access_scope: "å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰"

approval_process: "CISOæ‰¿èª + ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–"

*\# ãƒ¬ãƒ™ãƒ«3: æ³•çš„ãƒ»è¦åˆ¶å¯¾å¿œ*

legal_compliance:

trigger: "æ³•åŸ·è¡Œæ©Ÿé–¢ã‹ã‚‰ã®è¦è«‹"

response_time: "çŠ¶æ³ã«å¿œã˜ã¦"

authorized_personnel:

\- "æ³•å‹™éƒ¨é•·"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è²¬

å†è©¦è¡Œ

C

ç¶šã‘ã‚‹

ç·¨é›†

authorized_personnel: - "æ³•å‹™éƒ¨é•·" - "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è²¬ä»»è€…" -
"CEOæ‰¿èªæ¸ˆã¿æ‹…å½“è€…" access_scope: "è¦è«‹å¯¾è±¡ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿ã®ã¿"
approval_process: "CEO + æ³•å‹™éƒ¨é•·ã®æ›¸é¢æ‰¿èª"

emergency_access_matrix: break_glass_levels: level_1_service_recovery:
max_duration: "2æ™‚é–“" required_approvals: 1 post_incident_review:
"24æ™‚é–“ä»¥å†…" automatic_revocation: true

level_2_security_response:

max_duration: "4æ™‚é–“"

required_approvals: 2

post_incident_review: "12æ™‚é–“ä»¥å†…"

automatic_revocation: true

continuous_monitoring: true

level_3_legal_compliance:

max_duration: "çŠ¶æ³ã«å¿œã˜ã¦"

required_approvals: 3

post_incident_review: "å³æ™‚"

automatic_revocation: false

legal_documentation: true

post_emergency_procedures: immediate_actions: - "ã‚¢ã‚¯ã‚»ã‚¹çµ‚äº†ã®ç¢ºèª" -
"å®Ÿè¡Œã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¨˜éŒ²" - "é–¢ä¿‚è€…ã¸ã®å ±å‘Š"

documentation_requirements: - "ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç†ç”±æ›¸" -
"å®Ÿè¡Œã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãƒ»å¤‰æ›´ã®ãƒ­ã‚°" - "ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒ¬ãƒãƒ¼ãƒˆ" -
"æ”¹å–„ææ¡ˆæ›¸"

review_process: - "48æ™‚é–“ä»¥å†…ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¼šè­°" - "æ ¹æœ¬åŸå› åˆ†æ" -
"ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„ã®æ¤œè¨" - "å¿…è¦ã«å¿œã˜ãŸæ¨©é™è¦‹ç›´ã—"

\## 8. ç›£è¦–ãƒ»ãƒ­ã‚°æˆ¦ç•¥

\### 8.1 åŒ…æ‹¬çš„ç›£è¦–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

\`\`\`hcl

\# AWS Config - è¨­å®šå¤‰æ›´ç›£è¦–

resource "aws_config_configuration_recorder" "security_recorder" {

name = "TechNova-Security-Configuration-Recorder"

role_arn = aws_iam_role.config_recorder_role.arn

recording_group {

all_supported = true

include_global_resource_types = true

\# é‡è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š

resource_types = \[

"AWS::IAM::Role",

"AWS::IAM::Policy",

"AWS::IAM::User",

"AWS::S3::Bucket",

"AWS::KMS::Key",

"AWS::EC2::SecurityGroup",

"AWS::Organizations::Account"

\]

}

depends_on = \[aws_config_delivery_channel.security_channel\]

}

\# GuardDuty - è„…å¨æ¤œå‡º

resource "aws_guardduty_detector" "main" {

enable = true

\# S3ä¿è­·ã®æœ‰åŠ¹åŒ–

datasources {

s3_logs {

enable = true

}

kubernetes {

audit_logs {

enable = true

}

}

malware_protection {

scan_ec2_instance_with_findings {

ebs_volumes {

enable = true

}

}

}

}

tags = {

Purpose = "Threat Detection"

Environment = "Organization"

}

}

\# Security Hub - çµ±åˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–

resource "aws_securityhub_account" "main" {

enable_default_standards = true

}

\# CloudWatch ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ - é‡è¦ãªIAMã‚¤ãƒ™ãƒ³ãƒˆ

resource "aws_cloudwatch_log_metric_filter" "root_usage" {

name = "RootAccountUsage"

log_group_name = aws_cloudwatch_log_group.cloudtrail.name

pattern = "{ \$.userIdentity.type = \\Root\\ &&
\$.userIdentity.invokedBy NOT EXISTS && \$.eventType !=
\\AwsServiceEvent\\ }"

metric_transformation {

name = "RootAccountUsageCount"

namespace = "TechNova/Security"

value = "1"

}

}

resource "aws_cloudwatch_log_metric_filter" "unauthorized_api_calls" {

name = "UnauthorizedAPICalls"

log_group_name = aws_cloudwatch_log_group.cloudtrail.name

pattern = "{ (\$.errorCode = \\\*UnauthorizedOperation\\) \|\|
(\$.errorCode = \\AccessDenied\*\\) }"

metric_transformation {

name = "UnauthorizedAPICallsCount"

namespace = "TechNova/Security"

value = "1"

}

}

resource "aws_cloudwatch_log_metric_filter" "iam_policy_changes" {

name = "IAMPolicyChanges"

log_group_name = aws_cloudwatch_log_group.cloudtrail.name

pattern = "{ (\$.eventName = CreatePolicy) \|\| (\$.eventName =
DeletePolicy) \|\| (\$.eventName = CreatePolicyVersion) \|\|
(\$.eventName = DeletePolicyVersion) \|\| (\$.eventName =
AttachRolePolicy) \|\| (\$.eventName = DetachRolePolicy) }"

metric_transformation {

name = "IAMPolicyChangesCount"

namespace = "TechNova/Security"

value = "1"

}

}

8.2 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è„…å¨æ¤œå‡º

python

*\# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è„…å¨æ¤œå‡ºLambdaé–¢æ•°*

import boto3

import json

import os

from datetime import datetime

import hashlib

class ThreatDetectionEngine:

def \_\_init\_\_(self):

self.guardduty = boto3.client('guardduty')

self.securityhub = boto3.client('securityhub')

self.sns = boto3.client('sns')

self.dynamodb = boto3.resource('dynamodb')

self.threat_table =
self.dynamodb.Table(os.environ\['THREAT_DETECTION_TABLE'\])

def process_security_event(self, event):

"""

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†

"""

try:

*\# ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚¹ã®åˆ¤å®š*

if 'guardduty' in event.get('source', '').lower():

return self.handle_guardduty_finding(event)

elif 'securityhub' in event.get('source', '').lower():

return self.handle_securityhub_finding(event)

elif 'cloudtrail' in event.get('source', '').lower():

return self.handle_cloudtrail_event(event)

else:

return self.handle_generic_security_event(event)

except Exception as e:

print(f"Error processing security event: {str(e)}")

return {'statusCode': 500, 'error': str(e)}

def handle_guardduty_finding(self, event):

"""

GuardDutyè„…å¨æ¤œå‡ºã®å‡¦ç†

"""

detail = event.get('detail', {})

finding_id = detail.get('id', 'unknown')

severity = detail.get('severity', 0)

finding_type = detail.get('type', 'Unknown')

*\# è„…å¨ãƒ¬ãƒ™ãƒ«ã®åˆ¤å®š*

threat_level = self.determine_threat_level(severity, finding_type)

*\# è„…å¨æƒ…å ±ã®è¨˜éŒ²*

threat_record = {

'finding_id': finding_id,

'source': 'GuardDuty',

'type': finding_type,

'severity': severity,

'threat_level': threat_level,

'timestamp': datetime.now().isoformat(),

'account_id': detail.get('accountId', 'unknown'),

'region': detail.get('region', 'unknown'),

'resource': detail.get('resource', {}),

'evidence': detail.get('service', {}).get('evidence', {})

}

self.store_threat_record(threat_record)

*\# è‡ªå‹•å¯¾å¿œã®å®Ÿè¡Œ*

if threat_level in \['CRITICAL', 'HIGH'\]:

self.initiate_automated_response(threat_record)

*\# é€šçŸ¥é€ä¿¡*

self.send_threat_notification(threat_record)

return {'statusCode': 200, 'threat_level': threat_level}

def determine_threat_level(self, severity, finding_type):

"""

è„…å¨ãƒ¬ãƒ™ãƒ«ã®åˆ¤å®š

"""

*\# GuardDutyã®æ•°å€¤é‡è¦åº¦ã‚’æ–‡å­—åˆ—ã«å¤‰æ›*

if severity \>= 7.0:

base_level = 'HIGH'

elif severity \>= 4.0:

base_level = 'MEDIUM'

else:

base_level = 'LOW'

*\# è„…å¨ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹èª¿æ•´*

critical_threats = \[

'UnauthorizedAPICall',

'InstanceCredentialExfiltration',

'CryptoCurrency',

'Backdoor',

'Trojan'

\]

high_priority_threats = \[

'Recon',

'ResourceConsumption',

'Stealth',

'Persistence'

\]

if any(critical in finding_type for critical in critical_threats):

return 'CRITICAL'

elif any(high in finding_type for high in high_priority_threats):

return 'HIGH' if base_level != 'LOW' else 'MEDIUM'

else:

return base_level

def initiate_automated_response(self, threat_record):

"""

è‡ªå‹•å¯¾å¿œã®å®Ÿè¡Œ

"""

finding_type = threat_record\['type'\]

resource = threat_record.get('resource', {})

try:

*\# EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹é–¢é€£ã®è„…å¨*

if 'EC2' in resource.get('resourceType', ''):

instance_id = resource.get('instanceDetails', {}).get('instanceId')

if instance_id:

self.isolate_ec2_instance(instance_id, threat_record\['account_id'\])

*\# IAMé–¢é€£ã®è„…å¨*

elif 'IAMUser' in resource.get('resourceType', ''):

user_name = resource.get('accessKeyDetails', {}).get('userName')

if user_name:

self.disable_iam_user(user_name, threat_record\['account_id'\])

*\# S3é–¢é€£ã®è„…å¨*

elif 'S3Bucket' in resource.get('resourceType', ''):

bucket_name = resource.get('s3BucketDetails', \[{}\])\[0\].get('name')

if bucket_name:

self.secure_s3_bucket(bucket_name, threat_record\['account_id'\])

except Exception as e:

print(f"Automated response failed: {str(e)}")

*\# è‡ªå‹•å¯¾å¿œå¤±æ•—ã®é€šçŸ¥*

self.send_response_failure_alert(threat_record, str(e))

def isolate_ec2_instance(self, instance_id, account_id):

"""

EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®éš”é›¢

"""

*\# ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹*

assumed_role = self.assume_security_role(account_id)

ec2 = boto3.client('ec2',

aws_access_key_id=assumed_role\['AccessKeyId'\],

aws_secret_access_key=assumed_role\['SecretAccessKey'\],

aws_session_token=assumed_role\['SessionToken'\]

)

try:

*\# éš”é›¢ç”¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆ/å–å¾—*

isolation_sg = self.get_or_create_isolation_security_group(ec2)

*\# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’éš”é›¢ç”¨ã«å¤‰æ›´*

ec2.modify_instance_attribute(

InstanceId=instance_id,

Groups=\[isolation_sg\['GroupId'\]\]

)

*\# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚¿ã‚°ä»˜ã‘*

ec2.create_tags(

Resources=\[instance_id\],

Tags=\[

{'Key': 'SecurityStatus', 'Value': 'ISOLATED'},

{'Key': 'IsolationReason', 'Value': 'GuardDuty_Threat_Detection'},

{'Key': 'IsolationTime', 'Value': datetime.now().isoformat()}

\]

)

print(f"Successfully isolated EC2 instance: {instance_id}")

except Exception as e:

print(f"Failed to isolate EC2 instance {instance_id}: {str(e)}")

raise

def disable_iam_user(self, user_name, account_id):

"""

IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç„¡åŠ¹åŒ–

"""

assumed_role = self.assume_security_role(account_id)

iam = boto3.client('iam',

aws_access_key_id=assumed_role\['AccessKeyId'\],

aws_secret_access_key=assumed_role\['SecretAccessKey'\],

aws_session_token=assumed_role\['SessionToken'\]

)

try:

*\# ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç„¡åŠ¹åŒ–*

access_keys = iam.list_access_keys(UserName=user_name)

for key in access_keys\['AccessKeyMetadata'\]:

iam.update_access_key(

UserName=user_name,

AccessKeyId=key\['AccessKeyId'\],

Status='Inactive'

)

*\# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¿ã‚°ä»˜ã‘*

iam.tag_user(

UserName=user_name,

Tags=\[

{'Key': 'SecurityStatus', 'Value': 'DISABLED'},

{'Key': 'DisableReason', 'Value': 'GuardDuty_Threat_Detection'},

{'Key': 'DisableTime', 'Value': datetime.now().isoformat()}

\]

)

print(f"Successfully disabled IAM user: {user_name}")

except Exception as e:

print(f"Failed to disable IAM user {user_name}: {str(e)}")

raise

def send_threat_notification(self, threat_record):

"""

è„…å¨é€šçŸ¥ã®é€ä¿¡

"""

threat_level = threat_record\['threat_level'\]

*\# é€šçŸ¥å†…å®¹ã®ä½œæˆ*

notification_message = f"""

ğŸš¨ SECURITY THREAT DETECTED ğŸš¨

Threat Level: {threat_level}

Source: {threat_record\['source'\]}

Type: {threat_record\['type'\]}

Severity: {threat_record\['severity'\]}

Account: {threat_record\['account_id'\]}

Region: {threat_record\['region'\]}

Time: {threat_record\['timestamp'\]}

Resource Details:

{json.dumps(threat_record\['resource'\], indent=2)}

Automated Response: {'Initiated' if threat_level in \['CRITICAL',
'HIGH'\] else 'Not Required'}

View in Security Hub: https://console.aws.amazon.com/securityhub/

View in GuardDuty: https://console.aws.amazon.com/guardduty/

"""

*\# è„…å¨ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸé€šçŸ¥å…ˆã®é¸æŠ*

if threat_level == 'CRITICAL':

topic_arn = os.environ\['CRITICAL_SECURITY_ALERTS_TOPIC'\]

elif threat_level == 'HIGH':

topic_arn = os.environ\['HIGH_SECURITY_ALERTS_TOPIC'\]

else:

topic_arn = os.environ\['GENERAL_SECURITY_ALERTS_TOPIC'\]

try:

self.sns.publish(

TopicArn=topic_arn,

Subject=f"ğŸš¨ {threat_level} Security Threat: {threat_record\['type'\]}",

Message=notification_message

)

except Exception as e:

print(f"Failed to send threat notification: {str(e)}")

def lambda_handler(event, context):

"""

è„…å¨æ¤œå‡ºLambdaé–¢æ•°ã®ãƒ¡ã‚¤ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼

"""

detector = ThreatDetectionEngine()

try:

*\# ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ã‚³ãƒ¼ãƒ‰ã®å‡¦ç†*

if 'Records' in event:

results = \[\]

for record in event\['Records'\]:

*\# SNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å®Ÿéš›ã®ã‚¤ãƒ™ãƒ³ãƒˆæŠ½å‡º*

if 'Sns' in record:

actual_event = json.loads(record\['Sns'\]\['Message'\])

result = detector.process_security_event(actual_event)

results.append(result)

return {'statusCode': 200, 'results': results}

else:

*\# ç›´æ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†*

return detector.process_security_event(event)

except Exception as e:

print(f"Lambda handler error: {str(e)}")

return {'statusCode': 500, 'error': str(e)}

8.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

hcl

*\# CloudWatch ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®š*

resource "aws_cloudwatch_metric_alarm" "root_account_usage" {

alarm_name = "RootAccountUsage"

comparison_operator = "GreaterThanOrEqualToThreshold"

evaluation_periods = "1"

metric_name = "RootAccountUsageCount"

namespace = "TechNova/Security"

period = "60"

statistic = "Sum"

threshold = "1"

alarm_description = "Root account usage detected"

alarm_actions = \[aws_sns_topic.critical_security_alerts.arn\]

tags = {

Severity = "CRITICAL"

Purpose = "Root Account Monitoring"

}

}

resource "aws_cloudwatch_metric_alarm" "failed_console_logins" {

alarm_name = "FailedConsoleLogins"

comparison_operator = "GreaterThanThreshold"

evaluation_periods = "2"

metric_name = "ConsoleLoginFailures"

namespace = "TechNova/Security"

period = "300"

statistic = "Sum"

threshold = "5"

alarm_description = "Multiple failed console login attempts detected"

alarm_actions = \[aws_sns_topic.security_alerts.arn\]

tags = {

Severity = "HIGH"

Purpose = "Login Monitoring"

}

}

*\# GuardDutyã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ*

resource "aws_cloudwatch_event_rule" "guardduty_high_severity" {

name = "guardduty-high-severity-findings"

description = "GuardDuty high severity findings"

event_pattern = jsonencode({

source = \["aws.guardduty"\]

detail-type = \["GuardDuty Finding"\]

detail = {

severity = \[{

numeric = \["\>", 7.0\]

}\]

}

})

}

resource "aws_cloudwatch_event_target" "guardduty_lambda_target" {

rule = aws_cloudwatch_event_rule.guardduty_high_severity.name

target_id = "GuardDutyLambdaTarget"

arn = aws_lambda_function.threat_detection.arn

}

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰*

resource "aws_cloudwatch_dashboard" "security_metrics" {

dashboard_name = "TechNova-Security-Metrics"

dashboard_body = jsonencode({

widgets = \[

{

type = "metric"

x = 0

y = 0

width = 12

height = 6

properties = {

metrics = \[

\["TechNova/Security", "RootAccountUsageCount"\],

\[".", "UnauthorizedAPICallsCount"\],

\[".", "IAMPolicyChangesCount"\],

\[".", "ConsoleLoginFailures"\]

\]

view = "timeSeries"

stacked = false

region = "ap-northeast-1"

title = "Security Events Timeline"

period = 300

}

},

{

type = "metric"

x = 12

y = 0

width = 12

height = 6

properties = {

metrics = \[

\["AWS/GuardDuty", "FindingCount", "DetectorId",
aws_guardduty_detector.main.id\]

\]

view = "timeSeries"

stacked = false

region = "ap-northeast-1"

title = "GuardDuty Findings"

period = 300

}

},

{

type = "log"

x = 0

y = 6

width = 24

height = 6

properties = {

query = "SOURCE '/aws/lambda/threat-detection' \| fields @timestamp,
@message \| filter @message like /CRITICAL/ \| sort @timestamp desc \|
limit 20"

region = "ap-northeast-1"

title = "Critical Security Events"

view = "table"

}

}

\]

})

}

9\. å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

9.1 ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»

yaml

implementation_phases:

*\# ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰ï¼ˆ1-2ãƒ¶æœˆï¼‰*

phase_1_foundation:

duration: "8é€±é–“"

objectives:

\- "IAM Identity Centerè¨­å®š"

\- "åŸºæœ¬Permission Setä½œæˆ"

\- "CloudTrailãƒ»Configè¨­å®š"

\- "åŸºæœ¬ç›£è¦–ã®å®Ÿè£…"

deliverables:

\- "Identity Centerçµ±åˆå®Œäº†"

\- "åŸºæœ¬æ¨©é™ä½“ç³»æ§‹ç¯‰"

\- "ç›£æŸ»ãƒ­ã‚°åŸºç›¤æ§‹ç¯‰"

success_criteria:

\- "å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§SSOèªè¨¼å¯èƒ½"

\- "ç›£æŸ»ãƒ­ã‚°100%å–å¾—"

\- "åŸºæœ¬ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆå‹•ä½œ"

*\# ãƒ•ã‚§ãƒ¼ã‚º2: æ¨©é™æœ€é©åŒ–ï¼ˆ2-3ãƒ¶æœˆï¼‰*

phase_2_optimization:

duration: "6é€±é–“"

objectives:

\- "æœ€å°æ¨©é™ãƒãƒªã‚·ãƒ¼å®Ÿè£…"

\- "ABACå°å…¥"

\- "JITã‚¢ã‚¯ã‚»ã‚¹å®Ÿè£…"

\- "ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™æœ€é©åŒ–"

deliverables:

\- "ã‚«ã‚¹ã‚¿ãƒ Permission Setå®Œäº†"

\- "JITã‚¢ã‚¯ã‚»ã‚¹æ©Ÿèƒ½ç¨¼åƒ"

\- "æ¨©é™èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ç¢ºç«‹"

success_criteria:

\- "éå‰°æ¨©é™50%å‰Šæ¸›"

\- "JITã‚¢ã‚¯ã‚»ã‚¹åˆ©ç”¨ç‡80%"

\- "æ¨©é™èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹100%éµå®ˆ"

*\# ãƒ•ã‚§ãƒ¼ã‚º3: é«˜åº¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆ3-4ãƒ¶æœˆï¼‰*

phase_3_advanced_security:

duration: "6é€±é–“"

objectives:

\- "è„…å¨æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å®Ÿè£…"

\- "è‡ªå‹•å¯¾å¿œæ©Ÿèƒ½å®Ÿè£…"

\- "Break Glassãƒ—ãƒ­ã‚»ã‚¹ç¢ºç«‹"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è‡ªå‹•åŒ–"

deliverables:

\- "è„…å¨æ¤œå‡ºãƒ»å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒ"

\- "ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ä½“åˆ¶ç¢ºç«‹"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç›£è¦–è‡ªå‹•åŒ–"

success_criteria:

\- "è„…å¨æ¤œå‡ºç‡95%ä»¥ä¸Š"

\- "è‡ªå‹•å¯¾å¿œæ™‚é–“5åˆ†ä»¥å†…"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æº–æ‹ ç‡100%"

*\# ãƒ•ã‚§ãƒ¼ã‚º4: é‹ç”¨æœ€é©åŒ–ï¼ˆç¶™ç¶šï¼‰*

phase_4_optimization:

duration: "ç¶™ç¶šçš„"

objectives:

\- "é‹ç”¨ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–"

\- "æ€§èƒ½ç›£è¦–ãƒ»æ”¹å–„"

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚¹ãƒãƒ£å‘ä¸Š"

\- "ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„"

deliverables:

\- "é‹ç”¨æ‰‹é †æ›¸å®Œå‚™"

\- "æ€§èƒ½ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç¢ºç«‹"

\- "ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹"

success_criteria:

\- "é‹ç”¨åŠ¹ç‡20%å‘ä¸Š"

\- "ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦90%ä»¥ä¸Š"

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ0ä»¶"

9.2 å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

yaml

implementation_checklist:

*\# äº‹å‰æº–å‚™*

prerequisites:

\- name: "AWS Organizationsè¨­å®šç¢ºèª"

status: "required"

owner: "ITç®¡ç†è€…"

estimated_hours: 8

\- name: "æ—¢å­˜IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ«èª¿æŸ»"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 40

\- name: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶æ•´ç†"

status: "required"

owner: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹"

estimated_hours: 16

\- name: "æ—¢å­˜æ¨©é™ã®æ–‡æ›¸åŒ–"

status: "required"

owner: "å„äº‹æ¥­éƒ¨é–€"

estimated_hours: 80

*\# IAM Identity Centerè¨­å®š*

identity_center_setup:

\- name: "Identity Centeræœ‰åŠ¹åŒ–"

status: "required"

owner: "ITç®¡ç†è€…"

estimated_hours: 4

dependencies: \["Organizationsè¨­å®šç¢ºèª"\]

\- name: "å¤–éƒ¨IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ"

status: "required"

owner: "ITç®¡ç†è€…"

estimated_hours: 16

dependencies: \["Identity Centeræœ‰åŠ¹åŒ–"\]

\- name: "åŸºæœ¬Permission Setä½œæˆ"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 24

dependencies: \["å¤–éƒ¨IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ"\]

\- name: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒƒãƒ”ãƒ³ã‚°"

status: "required"

owner: "HRãƒ»ITç®¡ç†è€…"

estimated_hours: 32

dependencies: \["åŸºæœ¬Permission Setä½œæˆ"\]

*\# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–è¨­å®š*

security_monitoring:

\- name: "CloudTrailçµ„ç¹”ãƒ¬ãƒ™ãƒ«è¨­å®š"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 8

\- name: "GuardDutyå…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ‰åŠ¹åŒ–"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 16

\- name: "Security Hubçµ±åˆè¨­å®š"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 12

\- name: "Config Rulesè¨­å®š"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 20

*\# æ¨©é™æœ€é©åŒ–*

permission_optimization:

\- name: "æœ€å°æ¨©é™ãƒãƒªã‚·ãƒ¼ä½œæˆ"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 60

\- name: "ABACå®Ÿè£…"

status: "recommended"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 40

\- name: "JITã‚¢ã‚¯ã‚»ã‚¹å®Ÿè£…"

status: "recommended"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 80

\- name: "ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™æ•´ç†"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 48

*\# ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼*

testing_validation:

\- name: "æ¨©é™ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªå®Ÿè¡Œ"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 40

\- name: "ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ"

status: "required"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_hours: 16

\- name: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å—ã‘å…¥ã‚Œãƒ†ã‚¹ãƒˆ"

status: "required"

owner: "å„äº‹æ¥­éƒ¨é–€"

estimated_hours: 80

\- name: "æ€§èƒ½ãƒ»å¯ç”¨æ€§ãƒ†ã‚¹ãƒˆ"

status: "recommended"

owner: "SREãƒãƒ¼ãƒ "

estimated_hours: 32

estimated_total_effort:

total_hours: 592

total_weeks: "ç´„15é€±é–“ï¼ˆè¤‡æ•°äººä¸¦è¡Œä½œæ¥­æƒ³å®šï¼‰"

critical_path: "æ—¢å­˜æ¨©é™èª¿æŸ» â†’ Permission Setä½œæˆ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚° â†’
ãƒ†ã‚¹ãƒˆ"

9.3 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¨å¤‰æ›´ç®¡ç†

yaml

training_change_management:

*\# ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ¥ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°*

stakeholder_training:

executives:

content:

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ãƒãƒŠãƒ³ã‚¹æ¦‚è¦"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶ã¨å¯¾å¿œ"

\- "ROIãƒ»ãƒªã‚¹ã‚¯å‰Šæ¸›åŠ¹æœ"

duration: "2æ™‚é–“"

delivery_method: "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"

it_administrators:

content:

\- "IAM Identity Centerç®¡ç†"

\- "Permission Setè¨­è¨ˆãƒ»é‹ç”¨"

\- "ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"

\- "ç·Šæ€¥æ™‚å¯¾å¿œæ‰‹é †"

duration: "2æ—¥é–“"

delivery_method: "ãƒãƒ³ã‚ºã‚ªãƒ³ç ”ä¿®"

security_team:

content:

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–ãƒ»åˆ†æ"

\- "è„…å¨æ¤œå‡ºãƒ»å¯¾å¿œ"

\- "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç›£æŸ»"

\- "ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ"

duration: "3æ—¥é–“"

delivery_method: "å°‚é–€ç ”ä¿®"

end_users:

content:

\- "æ–°ã—ã„ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•"

\- "æ¨©é™ç”³è«‹ãƒ—ãƒ­ã‚»ã‚¹"

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹"

duration: "1æ™‚é–“"

delivery_method: "eãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°"

developers:

content:

\- "é–‹ç™ºç’°å¢ƒã§ã®ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†"

\- "IaCã§ã®æ¨©é™è¨­å®š"

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …"

duration: "4æ™‚é–“"

delivery_method: "æŠ€è¡“ç ”ä¿®"

*\# å¤‰æ›´ç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹*

change_management:

communication_plan:

\- phase: "äº‹å‰å‘ŠçŸ¥ï¼ˆ4é€±é–“å‰ï¼‰"

content: "å¤‰æ›´æ¦‚è¦ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»å½±éŸ¿"

channels: \["å…¨ç¤¾ãƒ¡ãƒ¼ãƒ«", "ã‚¤ãƒ³ãƒˆãƒ©ãƒãƒƒãƒˆ"\]

\- phase: "è©³ç´°èª¬æ˜ï¼ˆ2é€±é–“å‰ï¼‰"

content: "å…·ä½“çš„ãªå¤‰æ›´å†…å®¹ãƒ»æ‰‹é †"

channels: \["éƒ¨é–€èª¬æ˜ä¼š", "FAQå…¬é–‹"\]

\- phase: "ç›´å‰ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆ1é€±é–“å‰ï¼‰"

å†è©¦è¡Œ

C

ç¶šã‘ã‚‹

ç·¨é›†

content: "æœ€çµ‚ç¢ºèªãƒ»æº–å‚™äº‹é …" channels: \["å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«", "Slacké€šçŸ¥"\]

\- phase: "å®Ÿæ–½ä¸­ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰"

content: "é€²æ—çŠ¶æ³ãƒ»å•é¡Œå ±å‘Š"

channels: \["å°‚ç”¨Slackãƒãƒ£ãƒãƒ«", "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸"\]

\- phase: "å®Œäº†å ±å‘Šï¼ˆå®Ÿæ–½å¾Œï¼‰"

content: "å®Œäº†ç¢ºèªãƒ»æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—"

channels: \["å…¨ç¤¾ãƒ¡ãƒ¼ãƒ«", "æˆæœãƒ¬ãƒãƒ¼ãƒˆ"\]

risk_mitigation:

rollback_plan:

\- "å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆè¨­å®š"

\- "ç·Šæ€¥æ™‚ã®æ¨©é™å¾©æ—§æ‰‹é †"

\- "ãƒ“ã‚¸ãƒã‚¹ç¶™ç¶šæ€§ç¢ºä¿ç­–"

user_support:

\- "ç§»è¡ŒæœŸé–“ä¸­ã®ãƒ˜ãƒ«ãƒ—ãƒ‡ã‚¹ã‚¯ä½“åˆ¶å¼·åŒ–"

\- "FAQãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰"

\- "ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †æ˜ç¢ºåŒ–"

business_continuity:

\- "æ®µéšçš„ç§»è¡Œã«ã‚ˆã‚‹å½±éŸ¿æœ€å°åŒ–"

\- "é‡è¦æ¥­å‹™ã¸ã®å½±éŸ¿å›é¿"

\- "ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹çµŒè·¯ç¢ºä¿"

æˆåŠŸæŒ‡æ¨™ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

success_metrics: adoption_metrics: - name: "SSOåˆ©ç”¨ç‡" target: "95%ä»¥ä¸Š"
measurement: "æœˆæ¬¡"

\- name: "æ¨©é™ç”³è«‹å‡¦ç†æ™‚é–“"

target: "å¹³å‡2æ™‚é–“ä»¥å†…"

measurement: "é€±æ¬¡"

\- name: "ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦"

target: "4.0/5.0ä»¥ä¸Š"

measurement: "å››åŠæœŸ"

security_metrics:

\- name: "éå‰°æ¨©é™å‰Šæ¸›ç‡"

target: "50%ä»¥ä¸Šå‰Šæ¸›"

measurement: "æœˆæ¬¡"

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ"

target: "å‰å¹´æ¯”50%å‰Šæ¸›"

measurement: "æœˆæ¬¡"

\- name: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã‚¹ã‚³ã‚¢"

target: "95%ä»¥ä¸Š"

measurement: "æœˆæ¬¡"

operational_metrics:

\- name: "æ¨©é™ç®¡ç†å·¥æ•°"

target: "å‰å¹´æ¯”30%å‰Šæ¸›"

measurement: "å››åŠæœŸ"

\- name: "ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§"

target: "99.9%ä»¥ä¸Š"

measurement: "æœˆæ¬¡"

\- name: "å•ã„åˆã‚ã›ä»¶æ•°"

target: "å°å…¥å‰ã®20%ä»¥ä¸‹"

measurement: "é€±æ¬¡"

\### 9.4 é‹ç”¨ãƒ»ä¿å®ˆè¨ˆç”»

\`\`\`yaml

operations_maintenance:

\# æ—¥å¸¸é‹ç”¨æ¥­å‹™

daily_operations:

monitoring_tasks:

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆç¢ºèª"

frequency: "æ¯æ™‚"

owner: "NOCãƒãƒ¼ãƒ "

estimated_time: "15åˆ†"

\- name: "ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯"

frequency: "æ—¥æ¬¡"

owner: "SREãƒãƒ¼ãƒ "

estimated_time: "30åˆ†"

\- name: "æ¨©é™ç”³è«‹å‡¦ç†"

frequency: "éšæ™‚"

owner: "ITç®¡ç†è€…"

estimated_time: "1ä»¶10åˆ†"

incident_response:

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ"

sla: "æ¤œçŸ¥ã‹ã‚‰15åˆ†ä»¥å†…"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

\- name: "ã‚·ã‚¹ãƒ†ãƒ éšœå®³å¯¾å¿œ"

sla: "æ¤œçŸ¥ã‹ã‚‰30åˆ†ä»¥å†…"

owner: "SREãƒãƒ¼ãƒ "

\- name: "æ¨©é™é–¢é€£å•é¡Œå¯¾å¿œ"

sla: "å ±å‘Šã‹ã‚‰2æ™‚é–“ä»¥å†…"

owner: "ITç®¡ç†è€…"

\# å®šæœŸä¿å®ˆæ¥­å‹™

periodic_maintenance:

weekly_tasks:

\- name: "ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ãƒ¬ãƒ“ãƒ¥ãƒ¼"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_time: "2æ™‚é–“"

\- name: "ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½åˆ†æ"

owner: "SREãƒãƒ¼ãƒ "

estimated_time: "1æ™‚é–“"

\- name: "æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š"

owner: "ITç®¡ç†è€…"

estimated_time: "å¯å¤‰"

monthly_tasks:

\- name: "æ¨©é™åˆ©ç”¨çŠ¶æ³åˆ†æ"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_time: "4æ™‚é–“"

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚¹ãƒãƒ£è©•ä¾¡"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_time: "8æ™‚é–“"

\- name: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ"

owner: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹"

estimated_time: "6æ™‚é–“"

quarterly_tasks:

\- name: "ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™èªè¨¼"

owner: "å„éƒ¨é–€ç®¡ç†è€…"

estimated_time: "éƒ¨é–€ã‚ãŸã‚Š4æ™‚é–“"

\- name: "ç½å®³å¾©æ—§ãƒ†ã‚¹ãƒˆ"

owner: "SREãƒãƒ¼ãƒ "

estimated_time: "1æ—¥"

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šè¦‹ç›´ã—"

owner: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ "

estimated_time: "16æ™‚é–“"

\# ç¶™ç¶šçš„æ”¹å–„

continuous_improvement:

performance_optimization:

\- name: "ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“æœ€é©åŒ–"

frequency: "æœˆæ¬¡"

method: "æ€§èƒ½ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ†æ"

\- name: "ã‚³ã‚¹ãƒˆæœ€é©åŒ–"

frequency: "å››åŠæœŸ"

method: "åˆ©ç”¨çŠ¶æ³åˆ†æãƒ»rightsizing"

\- name: "ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„"

frequency: "å››åŠæœŸ"

method: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ†æ"

security_enhancement:

\- name: "è„…å¨ãƒ©ãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ—æ›´æ–°"

frequency: "æœˆæ¬¡"

method: "è„…å¨ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹åˆ†æ"

\- name: "æ¤œçŸ¥ãƒ«ãƒ¼ãƒ«æœ€é©åŒ–"

frequency: "æœˆæ¬¡"

method: "å½é™½æ€§ãƒ»å½é™°æ€§åˆ†æ"

\- name: "æ–°è¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚µãƒ¼ãƒ“ã‚¹è©•ä¾¡"

frequency: "å››åŠæœŸ"

method: "æŠ€è¡“å‹•å‘èª¿æŸ»ãƒ»PoCå®Ÿæ–½"

compliance_maintenance:

\- name: "è¦åˆ¶è¦ä»¶æ›´æ–°å¯¾å¿œ"

frequency: "éšæ™‚"

method: "æ³•è¦åˆ¶å‹•å‘ç›£è¦–"

\- name: "å†…éƒ¨ç›£æŸ»å¯¾å¿œ"

frequency: "å¹´æ¬¡"

method: "ç›£æŸ»è¦ä»¶æº–æ‹ ç¢ºèª"

\- name: "å¤–éƒ¨ç›£æŸ»å¯¾å¿œ"

frequency: "å¹´æ¬¡"

method: "ç¬¬ä¸‰è€…ç›£æŸ»æº–å‚™ãƒ»å¯¾å¿œ"

9.5 æˆåŠŸè¦å› ã¨æ³¨æ„ç‚¹

yaml

success_factors:

*\# æˆåŠŸè¦å› *

critical_success_factors:

executive_support:

importance: "æœ€é‡è¦"

description: "çµŒå–¶é™£ã®æ˜ç¢ºãªã‚µãƒãƒ¼ãƒˆã¨ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿"

actions:

\- "CXOãƒ¬ãƒ™ãƒ«ã§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ‰¿èª"

\- "ååˆ†ãªäºˆç®—ãƒ»äººçš„ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿"

\- "å¤‰æ›´ç®¡ç†ã¸ã®ç©æ¥µçš„é–¢ä¸"

cross_functional_collaboration:

importance: "é‡è¦"

description: "éƒ¨é–€æ¨ªæ–­çš„ãªå”åŠ›ä½“åˆ¶æ§‹ç¯‰"

actions:

\- "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ITãƒ»äº‹æ¥­éƒ¨é–€ã®é€£æº"

\- "å®šæœŸçš„ãªã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ä¼šè­°"

\- "æ˜ç¢ºãªå½¹å‰²ãƒ»è²¬ä»»åˆ†æ‹…"

phased_implementation:

importance: "é‡è¦"

description: "æ®µéšçš„ãªå®Ÿè£…ã«ã‚ˆã‚‹å½±éŸ¿æœ€å°åŒ–"

actions:

\- "ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®æ¤œè¨¼"

\- "æ®µéšçš„ãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ"

\- "å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®æˆæœç¢ºèª"

user_training:

importance: "é‡è¦"

description: "ååˆ†ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¨æ”¯æ´"

actions:

\- "å½¹å‰²åˆ¥ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ­ã‚°ãƒ©ãƒ "

\- "å……å®Ÿã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"

\- "ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆä½“åˆ¶"

*\# æ³¨æ„ç‚¹ãƒ»ãƒªã‚¹ã‚¯*

implementation_risks:

technical_risks:

\- risk: "æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆå•é¡Œ"

impact: "é«˜"

probability: "ä¸­"

mitigation: "äº‹å‰ã®äº’æ›æ€§æ¤œè¨¼ãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®ç¢ºèª"

\- risk: "å¤§è¦æ¨¡æ¨©é™å¤‰æ›´ã«ã‚ˆã‚‹æ¥­å‹™å½±éŸ¿"

impact: "é«˜"

probability: "ä¸­"

mitigation: "æ®µéšçš„ç§»è¡Œãƒ»ç·Šæ€¥æ™‚å¾©æ—§æ‰‹é †æº–å‚™"

\- risk: "è¤‡é›‘ãªæ¨©é™è¨­å®šã«ã‚ˆã‚‹é‹ç”¨è² è·å¢—"

impact: "ä¸­"

probability: "é«˜"

mitigation: "è‡ªå‹•åŒ–æ¨é€²ãƒ»é‹ç”¨æ‰‹é †æ¨™æº–åŒ–"

organizational_risks:

\- risk: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¤‰æ›´ã¸ã®æŠµæŠ—"

impact: "ä¸­"

probability: "é«˜"

mitigation: "ååˆ†ãªäº‹å‰èª¬æ˜ãƒ»æ®µéšçš„å°å…¥"

\- risk: "ã‚¹ã‚­ãƒ«ä¸è¶³ã«ã‚ˆã‚‹é‹ç”¨å“è³ªä½ä¸‹"

impact: "é«˜"

probability: "ä¸­"

mitigation: "ç¶™ç¶šçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»å¤–éƒ¨æ”¯æ´æ´»ç”¨"

\- risk: "å¤‰æ›´ç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã®ä¸å‚™"

impact: "ä¸­"

probability: "ä¸­"

mitigation: "æ˜ç¢ºãªãƒ—ãƒ­ã‚»ã‚¹å®šç¾©ãƒ»è²¬ä»»è€…è¨­å®š"

security_risks:

\- risk: "ç§»è¡ŒæœŸé–“ä¸­ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚®ãƒ£ãƒƒãƒ—"

impact: "é«˜"

probability: "ä¸­"

mitigation: "ä¸¦è¡Œé‹ç”¨æœŸé–“è¨­å®šãƒ»ç›£è¦–å¼·åŒ–"

\- risk: "ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹æ‰‹é †ã®ä¸å‚™"

impact: "é«˜"

probability: "ä½"

mitigation: "è©³ç´°ãªç·Šæ€¥æ™‚æ‰‹é †ãƒ»å®šæœŸçš„ãªè¨“ç·´"

\- risk: "éåº¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ã‚ˆã‚‹æ¥­å‹™é˜»å®³"

impact: "ä¸­"

probability: "ä¸­"

mitigation: "ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒãƒ©ãƒ³ã‚¹"

*\# æˆåŠŸæŒ‡æ¨™ã®è¨­å®š*

kpi_framework:

security_kpis:

\- name: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå‰Šæ¸›ç‡"

baseline: "ç¾çŠ¶ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ•°"

target: "50%å‰Šæ¸›"

measurement_period: "å¹´æ¬¡"

\- name: "æ¨©é™éå‰°ä»˜ä¸å‰Šæ¸›ç‡"

baseline: "ç¾çŠ¶ã®éå‰°æ¨©é™æ•°"

target: "70%å‰Šæ¸›"

measurement_period: "å››åŠæœŸ"

\- name: "ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æº–æ‹ ç‡"

baseline: "ç¾çŠ¶ã®æº–æ‹ ç‡"

target: "100%"

measurement_period: "æœˆæ¬¡"

operational_kpis:

\- name: "æ¨©é™ç®¡ç†å·¥æ•°å‰Šæ¸›ç‡"

baseline: "ç¾çŠ¶ã®ç®¡ç†å·¥æ•°"

target: "40%å‰Šæ¸›"

measurement_period: "å››åŠæœŸ"

\- name: "ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§"

baseline: "ç¾çŠ¶ã®å¯ç”¨æ€§"

target: "99.9%ä»¥ä¸Š"

measurement_period: "æœˆæ¬¡"

\- name: "å¹³å‡æ¨©é™ä»˜ä¸æ™‚é–“"

baseline: "ç¾çŠ¶ã®å‡¦ç†æ™‚é–“"

target: "2æ™‚é–“ä»¥å†…"

measurement_period: "é€±æ¬¡"

user_satisfaction_kpis:

\- name: "ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ã‚¹ã‚³ã‚¢"

baseline: "å°å…¥å‰ã®æº€è¶³åº¦"

target: "4.0/5.0ä»¥ä¸Š"

measurement_period: "å››åŠæœŸ"

\- name: "ã‚µãƒãƒ¼ãƒˆå•ã„åˆã‚ã›å‰Šæ¸›ç‡"

baseline: "ç¾çŠ¶ã®å•ã„åˆã‚ã›æ•°"

target: "60%å‰Šæ¸›"

measurement_period: "æœˆæ¬¡"

\- name: "æ¨©é™ç”³è«‹å®Œäº†ç‡"

baseline: "N/Aï¼ˆæ–°æŒ‡æ¨™ï¼‰"

target: "95%ä»¥ä¸Š"

measurement_period: "é€±æ¬¡"

ã¾ã¨ã‚

æœ¬AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»æ¨©é™è¨­è¨ˆï¼ˆåŸºæœ¬æ–¹é‡ï¼‰ã¯ã€TechNovaç¤¾ã®120ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã«ãŠã‘ã‚‹åŒ…æ‹¬çš„ãªæ¨©é™ç®¡ç†æˆ¦ç•¥ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

ä¸»è¦æˆæœç‰©

ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆæ¨©é™ãƒ¢ãƒ‡ãƒ«ã®ç¢ºç«‹

IAM Identity Centerã«ã‚ˆã‚‹çµ±åˆèªè¨¼åŸºç›¤

æœ€å°æ¨©é™åŸå‰‡ã®å¾¹åº•å®Ÿè£…

è·å‹™åˆ†é›¢ã«ã‚ˆã‚‹ä¸æ­£é˜²æ­¢æ©Ÿèƒ½

ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ 

ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†æ©Ÿèƒ½

åŒ…æ‹¬çš„ç›£è¦–ãƒ»ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 

äº‹æ¥­éƒ¨é–€åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã¨ã®çµ±åˆ

æœ¬æ–¹é‡ã¯ã€æ—¢ã«å®šç¾©ã•ã‚ŒãŸäº‹æ¥­éƒ¨é–€åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ§‹æˆã®ç‰©ç†çš„ãª120ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ†é›¢æ§‹é€ ã«å¯¾ã—ã€è«–ç†çš„ãªæ¨©é™ç®¡ç†ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚ä¸¡æ–‡æ›¸ãŒç›¸äº’è£œå®Œã™ã‚‹ã“ã¨ã§ã€å®Œå…¨ãªãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆæˆ¦ç•¥ãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚

å®Ÿè£…ã«ã‚ˆã‚‹æœŸå¾…åŠ¹æœ

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯50%å‰Šæ¸›

æ¨©é™ç®¡ç†å·¥æ•°40%å‰Šæ¸›

ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æº–æ‹ 100%é”æˆ

é‹ç”¨åŠ¹ç‡30%å‘ä¸Š

ç›£æŸ»å¯¾å¿œæ™‚é–“75%çŸ­ç¸®

ã“ã®åŒ…æ‹¬çš„ãªæ¨©é™è¨­è¨ˆã«ã‚ˆã‚Šã€TechNovaç¤¾ã¯å®‰å…¨ã§åŠ¹ç‡çš„ãªã€ãã—ã¦è¦åˆ¶è¦ä»¶ã«å®Œå…¨æº–æ‹ ã—ãŸã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

